<!doctype html>
<html lang="ar" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
        
        * {
            font-family: 'Amiri', serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
        }
        
        .admin-gradient {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 50%, #f87171 100%);
        }
        
        .teacher-gradient {
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%);
        }
        
        .student-gradient {
            background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 50%, #a78bfa 100%);
        }
        
        .card-shadow {
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .nav-item {
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: #3b82f6;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-item:hover::before,
        .nav-item.active::before {
            width: 100%;
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .danger-zone {
            border: 2px solid #dc2626;
            background: #fef2f2;
        }
        
        .backup-card {
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .backup-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="bg-gray-50"><!-- Header -->
  <header class="gradient-bg text-white shadow-lg">
   <div class="container mx-auto px-4 py-6">
    <div class="flex items-center justify-between">
     <div class="flex items-center space-x-4 space-x-reverse">
      <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center">
       <svg class="w-10 h-10 text-blue-600" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" /> <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2" />
       </svg>
      </div>
      <div>
       <h1 id="systemTitle" class="text-2xl font-bold">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h1>
       <p id="centerInfo" class="text-blue-200"><span id="centerName">Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨ Ù„Ù„Ø£Ù„Ø­Ø§Ù† ÙˆØ§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ù‚Ø¨Ø·ÙŠØ©</span> - <span id="churchName">ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ø³ÙŠØ¯Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ ÙˆØ§Ù„Ù‚Ø¯ÙŠØ³ Ù…Ø§Ø± ÙŠÙˆØ­Ù†Ø§</span></p>
      </div>
     </div>
     <div id="userInfo" class="hidden text-left">
      <div class="text-sm text-blue-200">
       Ù…Ø±Ø­Ø¨Ø§Ù‹
      </div>
      <div id="userName" class="font-semibold"></div>
      <div id="userRole" class="text-xs text-blue-300"></div>
     </div>
    </div>
   </div>
  </header><!-- Navigation -->
  <nav class="bg-white shadow-md sticky top-0 z-50">
   <div class="container mx-auto px-4">
    <div class="flex justify-center space-x-8 space-x-reverse py-4" id="mainNavigation"><button class="nav-item active px-4 py-2 text-gray-700 hover:text-blue-600 font-semibold transition-colors" onclick="showSection('home')"> ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© </button> <button class="nav-item px-4 py-2 text-gray-700 hover:text-blue-600 font-semibold transition-colors" onclick="showSection('login')"> ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ </button>
    </div><!-- Admin Navigation -->
    <div id="adminNavigation" class="hidden flex justify-center space-x-6 space-x-reverse py-4 border-t border-gray-200"><button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-red-600 font-semibold transition-colors" onclick="showAdminSection('dashboard')"> ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-red-600 font-semibold transition-colors" onclick="showAdminSection('students')"> ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ† </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-red-600 font-semibold transition-colors" onclick="showAdminSection('teachers')"> ğŸ‘¨â€ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ø§Ù… </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-red-600 font-semibold transition-colors" onclick="showAdminSection('attendance')"> ğŸ“ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-red-600 font-semibold transition-colors" onclick="showAdminSection('grades')"> ğŸ“ˆ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-red-600 font-semibold transition-colors" onclick="showAdminSection('backup')"> ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ </button>
    </div><!-- Teacher Navigation -->
    <div id="teacherNavigation" class="hidden flex justify-center space-x-6 space-x-reverse py-4 border-t border-gray-200"><button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-green-600 font-semibold transition-colors" onclick="showTeacherSection('dashboard')"> ğŸ¯ Ù„ÙˆØ­Ø© Ø§Ù„Ø®Ø§Ø¯Ù… </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-green-600 font-semibold transition-colors" onclick="showTeacherSection('attendance')"> âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-green-600 font-semibold transition-colors" onclick="showTeacherSection('grades')"> ğŸ“Š Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-green-600 font-semibold transition-colors" onclick="showTeacherSection('students')"> ğŸ‘¥ Ø·Ù„Ø§Ø¨ÙŠ </button>
    </div><!-- Student Navigation -->
    <div id="studentNavigation" class="hidden flex justify-center space-x-6 space-x-reverse py-4 border-t border-gray-200"><button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-purple-600 font-semibold transition-colors" onclick="showStudentSection('profile')"> ğŸ‘¤ Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-purple-600 font-semibold transition-colors" onclick="showStudentSection('grades')"> ğŸ“Š Ø¯Ø±Ø¬Ø§ØªÙŠ </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-purple-600 font-semibold transition-colors" onclick="showStudentSection('attendance')"> ğŸ“… Ø­Ø¶ÙˆØ±ÙŠ </button> <button class="nav-item px-3 py-2 text-sm text-gray-700 hover:text-purple-600 font-semibold transition-colors" onclick="showStudentSection('homework')"> ğŸ“š Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª </button>
    </div>
   </div>
  </nav><!-- Main Content -->
  <main class="container mx-auto px-4 py-8"><!-- Home Section -->
   <section id="home" class="section-content fade-in">
    <div class="text-center mb-12">
     <h2 class="text-4xl font-bold text-gray-800 mb-4">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h2>
     <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Serverless ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø®Ø§Ø¯Ù… Backend - Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­</p>
    </div><!-- System Features -->
    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-8 card-shadow mb-8">
     <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">ğŸ¯ Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯</h3>
     <div class="grid md:grid-cols-3 gap-6">
      <div class="text-center p-4 bg-white rounded-lg">
       <div class="text-3xl mb-3">
        ğŸ’¾
       </div>
       <h4 class="font-bold text-blue-800 mb-2">ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ</h4>
       <p class="text-sm text-blue-600">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ù…ØªØµÙØ­Ùƒ - Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ø®Ø§Ø¯Ù…</p>
      </div>
      <div class="text-center p-4 bg-white rounded-lg">
       <div class="text-3xl mb-3">
        ğŸ“¥
       </div>
       <h4 class="font-bold text-green-800 mb-2">Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØªØµØ¯ÙŠØ±</h4>
       <p class="text-sm text-green-600">Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙƒØ§Ù…Ù„ Ø¨ØµÙŠØºØ© Excel Ùˆ JSON</p>
      </div>
      <div class="text-center p-4 bg-white rounded-lg">
       <div class="text-3xl mb-3">
        ğŸ”’
       </div>
       <h4 class="font-bold text-purple-800 mb-2">Ø£Ù…Ø§Ù† ÙƒØ§Ù…Ù„</h4>
       <p class="text-sm text-purple-600">Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø§ ØªØºØ§Ø¯Ø± Ø¬Ù‡Ø§Ø²Ùƒ Ø£Ø¨Ø¯Ø§Ù‹</p>
      </div>
     </div>
    </div><!-- User Types -->
    <div class="grid md:grid-cols-3 gap-8 mb-12"><!-- Admin Panel -->
     <div class="bg-white rounded-lg p-8 card-shadow hover-lift border-t-4 border-red-500">
      <div class="text-center">
       <div class="w-20 h-20 admin-gradient rounded-full flex items-center justify-center mx-auto mb-6"><span class="text-3xl text-white">ğŸ‘¨â€ğŸ’¼</span>
       </div>
       <h3 class="text-2xl font-bold text-gray-800 mb-4">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
       <div class="text-gray-600 space-y-2 mb-6">
        <p>â€¢ Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ† ÙˆØ§Ù„Ø®Ø¯Ø§Ù…</p>
        <p>â€¢ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø¯Ø±Ø¬Ø§Øª</p>
        <p>â€¢ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙƒØ§Ù…Ù„</p>
        <p>â€¢ ØªÙ‚Ø§Ø±ÙŠØ± Ø´Ø§Ù…Ù„Ø©</p>
       </div>
       <div class="bg-red-50 border border-red-200 rounded-lg p-3">
        <p class="text-sm text-red-700 font-semibold">Username: ADMIN</p>
        <p class="text-sm text-red-700 font-semibold">Password: admin123</p>
       </div>
      </div>
     </div><!-- Teacher Panel -->
     <div class="bg-white rounded-lg p-8 card-shadow hover-lift border-t-4 border-green-500">
      <div class="text-center">
       <div class="w-20 h-20 teacher-gradient rounded-full flex items-center justify-center mx-auto mb-6"><span class="text-3xl text-white">ğŸ‘¨â€ğŸ«</span>
       </div>
       <h3 class="text-2xl font-bold text-gray-800 mb-4">Ù„ÙˆØ­Ø© Ø§Ù„Ø®Ø§Ø¯Ù…</h3>
       <div class="text-gray-600 space-y-2 mb-6">
        <p>â€¢ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨</p>
        <p>â€¢ Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</p>
        <p>â€¢ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</p>
        <p>â€¢ Ø±ÙØ¹ Ø§Ù„ØªØ­Ø¶ÙŠØ±</p>
       </div>
       <div class="bg-green-50 border border-green-200 rounded-lg p-3">
        <p class="text-sm text-green-700 font-semibold">ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Ø¯Ù… + ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</p>
       </div>
      </div>
     </div><!-- Student Panel -->
     <div class="bg-white rounded-lg p-8 card-shadow hover-lift border-t-4 border-purple-500">
      <div class="text-center">
       <div class="w-20 h-20 student-gradient rounded-full flex items-center justify-center mx-auto mb-6"><span class="text-3xl text-white">ğŸ‘¨â€ğŸ“</span>
       </div>
       <h3 class="text-2xl font-bold text-gray-800 mb-4">Ù„ÙˆØ­Ø© Ø§Ù„Ø¯Ø§Ø±Ø³</h3>
       <div class="text-gray-600 space-y-2 mb-6">
        <p>â€¢ Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬</p>
        <p>â€¢ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø¶ÙˆØ±</p>
        <p>â€¢ ØªØ³Ù„ÙŠÙ… Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</p>
        <p>â€¢ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯</p>
       </div>
       <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
        <p class="text-sm text-purple-700 font-semibold">ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø§Ø±Ø³ Ø§Ù„ÙØ±ÙŠØ¯</p>
       </div>
      </div>
     </div>
    </div><!-- Storage Info -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
     <h3 class="text-xl font-bold text-blue-800 mb-4">ğŸ’¾ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ†</h3>
     <div class="grid md:grid-cols-2 gap-6">
      <div class="bg-white p-4 rounded-lg">
       <h4 class="font-bold text-blue-800 mb-3">ğŸ“¦ LocalStorage</h4>
       <div class="space-y-2 text-sm">
        <p>â€¢ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ† ÙˆØ§Ù„Ø®Ø¯Ø§Ù…</p>
        <p>â€¢ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø¯Ø±Ø¬Ø§Øª</p>
        <p>â€¢ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©</p>
        <p>â€¢ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</p>
       </div>
      </div>
      <div class="bg-white p-4 rounded-lg">
       <h4 class="font-bold text-green-800 mb-3">ğŸ“¥ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</h4>
       <div class="space-y-2 text-sm">
        <p>â€¢ ØªØµØ¯ÙŠØ± Excel (Ø¯Ø§Ø±Ø³ÙŠÙ† / Ø®Ø¯Ø§Ù… / ÙƒØ§Ù…Ù„)</p>
        <p>â€¢ ØªØµØ¯ÙŠØ± JSON</p>
        <p>â€¢ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel</p>
        <p>â€¢ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† JSON</p>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Login Section -->
   <section id="login" class="section-content hidden">
    <div class="max-w-md mx-auto bg-white rounded-lg p-8 card-shadow">
     <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
     <div class="mb-6">
      <div class="flex border-b border-gray-200"><button id="adminTab" class="flex-1 py-3 px-4 text-center font-semibold text-gray-500" onclick="switchLoginTab('admin')"> ğŸ‘¨â€ğŸ’¼ Ø¥Ø¯Ø§Ø±Ø© </button> <button id="teacherTab" class="flex-1 py-3 px-4 text-center font-semibold text-gray-500" onclick="switchLoginTab('teacher')"> ğŸ‘¨â€ğŸ« Ø®Ø§Ø¯Ù… </button> <button id="studentTab" class="flex-1 py-3 px-4 text-center font-semibold text-blue-600 border-b-2 border-blue-600" onclick="switchLoginTab('student')"> ğŸ‘¨â€ğŸ“ Ø¯Ø§Ø±Ø³ </button>
      </div>
     </div>
     <form id="loginForm" onsubmit="handleLogin(event)">
      <div id="studentLogin">
       <div class="mb-6"><label for="studentCode" class="block text-sm font-semibold text-gray-700 mb-2">ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø§Ø±Ø³</label> <input type="text" id="studentCode" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ù…Ø«Ø§Ù„: DQ34ZA54">
       </div>
      </div>
      <div id="teacherLogin" class="hidden">
       <div class="mb-4"><label for="teacherCode" class="block text-sm font-semibold text-gray-700 mb-2">ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Ø¯Ù…</label> <input type="text" id="teacherCode" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="Ù…Ø«Ø§Ù„: FZ64SZ56">
       </div>
       <div class="mb-6"><label for="teacherPassword" class="block text-sm font-semibold text-gray-700 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label> <input type="password" id="teacherPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
       </div>
      </div>
      <div id="adminLogin" class="hidden">
       <div class="mb-4"><label for="adminUsername" class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label> <input type="text" id="adminUsername" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="ADMIN">
       </div>
       <div class="mb-6"><label for="adminPassword" class="block text-sm font-semibold text-gray-700 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label> <input type="password" id="adminPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="admin123">
       </div>
      </div><button type="submit" id="loginButton" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors"> <span class="flex items-center justify-center gap-2"> <span id="loginButtonText">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¯Ø§Ø±Ø³</span>
        <div id="loginSpinner" class="loading-spinner hidden"></div></span> </button>
     </form>
     <div class="mt-6 text-center"><button onclick="logout()" class="text-gray-500 hover:text-gray-700 text-sm"> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ </button>
     </div>
    </div>
   </section><!-- Admin Dashboard -->
   <section id="adminDashboard" class="section-content hidden">
    <div class="bg-white rounded-lg p-8 card-shadow">
     <div class="flex justify-between items-center mb-8">
      <div>
       <h2 class="text-3xl font-bold text-gray-800">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
       <p class="text-gray-600">Ø¥Ø¯Ø§Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨</p>
      </div><button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ </button>
     </div><!-- Quick Stats -->
     <div class="grid md:grid-cols-4 gap-6 mb-8">
      <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 text-center">
       <div class="text-3xl mb-2">
        ğŸ‘¥
       </div>
       <h3 class="text-2xl font-bold text-blue-800" id="totalStudentsCount">0</h3>
       <p class="text-blue-600">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ†</p>
      </div>
      <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 text-center">
       <div class="text-3xl mb-2">
        ğŸ‘¨â€ğŸ«
       </div>
       <h3 class="text-2xl font-bold text-green-800" id="totalTeachersCount">0</h3>
       <p class="text-green-600">Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø¯Ø§Ù…</p>
      </div>
      <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-6 text-center">
       <div class="text-3xl mb-2">
        ğŸ“Š
       </div>
       <h3 class="text-2xl font-bold text-yellow-800" id="attendanceRate">0%</h3>
       <p class="text-yellow-600">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</p>
      </div>
      <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6 text-center">
       <div class="text-3xl mb-2">
        ğŸ“ˆ
       </div>
       <h3 class="text-2xl font-bold text-purple-800" id="avgGrade">0%</h3>
       <p class="text-purple-600">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</p>
      </div>
     </div>
     <div id="adminContent">
      <div class="text-center py-12">
       <div class="text-6xl mb-4">
        ğŸ“Š
       </div>
       <p class="text-gray-500 text-lg">Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ</p>
      </div>
     </div>
    </div>
   </section><!-- Teacher Dashboard -->
   <section id="teacherDashboard" class="section-content hidden">
    <div class="bg-white rounded-lg p-8 card-shadow">
     <div class="flex justify-between items-center mb-8">
      <div>
       <h2 class="text-3xl font-bold text-gray-800">Ù„ÙˆØ­Ø© Ø§Ù„Ø®Ø§Ø¯Ù…</h2>
       <p class="text-gray-600" id="teacherWelcome">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ</p>
      </div><button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ </button>
     </div>
     <div id="teacherContent">
      <div class="text-center py-12">
       <div class="text-6xl mb-4">
        ğŸ¯
       </div>
       <p class="text-gray-500 text-lg">Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ</p>
      </div>
     </div>
    </div>
   </section><!-- Student Dashboard -->
   <section id="studentDashboard" class="section-content hidden">
    <div class="bg-white rounded-lg p-8 card-shadow">
     <div class="flex justify-between items-center mb-8">
      <div>
       <h2 class="text-3xl font-bold text-gray-800">Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</h2>
       <p class="text-gray-600" id="studentWelcome">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ</p>
      </div><button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors"> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ </button>
     </div>
     <div id="studentContent">
      <div class="text-center py-12">
       <div class="text-6xl mb-4">
        ğŸ‘¨â€ğŸ“
       </div>
       <p class="text-gray-500 text-lg">Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ</p>
      </div>
     </div>
    </div>
   </section>
  </main><!-- Footer -->
  <footer class="gradient-bg text-white mt-16">
   <div class="container mx-auto px-4 py-8">
    <div class="text-center">
     <h3 class="text-xl font-bold mb-4">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h3>
     <p class="text-blue-200 mb-4">Ù†Ø¸Ø§Ù… Serverless Ù…ØªÙƒØ§Ù…Ù„ - Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</p>
     <p class="text-sm text-blue-100">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2024</p>
    </div>
   </div>
  </footer>
  <script>
        // Configuration
        const defaultConfig = {
            system_title: "Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
            center_name: "Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø¨ÙŠØ¨ Ù„Ù„Ø£Ù„Ø­Ø§Ù† ÙˆØ§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ù‚Ø¨Ø·ÙŠØ©",
            church_name: "ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ø³ÙŠØ¯Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ ÙˆØ§Ù„Ù‚Ø¯ÙŠØ³ Ù…Ø§Ø± ÙŠÙˆØ­Ù†Ø§"
        };

        // Current user and state
        let currentUser = null;
        let currentLoginTab = 'student';

        // Storage Keys
        const STORAGE_KEYS = {
            STUDENTS: 'alhabeeb_students',
            TEACHERS: 'alhabeeb_teachers',
            ATTENDANCE: 'alhabeeb_attendance',
            GRADES: 'alhabeeb_grades',
            HOMEWORK: 'alhabeeb_homework',
            ADMIN: 'alhabeeb_admin'
        };

        // Default Admin Account
        const DEFAULT_ADMIN = {
            username: 'ADMIN',
            password: 'admin123',
            name: 'Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…'
        };

        // Educational Stages
        const STAGES = [
            'KG1', 'KG2', 'Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„', 'Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ', 'Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«',
            'Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹', 'Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³', 'Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³',
            'Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ', 'Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ', 'Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ',
            'Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ', 'Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ', 'Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ',
            'Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©', 'Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±'
        ];

        // Classes
        const CLASSES = [
            'ØªÙ…Ù‡ÙŠØ¯ÙŠ', 'Ø£ÙˆÙ„ÙŠ ÙˆØ«Ø§Ù†ÙŠØ©', 'Ø«Ø§Ù„Ø«Ø© ÙˆØ±Ø§Ø¨Ø¹Ø©', 'Ø®Ø§Ù…Ø³Ø© ÙˆØ³Ø§Ø¯Ø³Ø©',
            'Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ', 'Ø«Ø§Ù†ÙˆÙŠ', 'Ø¬Ø§Ù…Ø¹Ø©', 'Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø£Ù…ÙˆØ±'
        ];

        // Teacher Specialties
        const SPECIALTIES = [
            'Ø¯Ø±Ø§Ø³ÙŠ Ø·Ù‚ÙˆØ³', 'Ù‚Ø¨Ø·ÙŠ', 'Ø£Ù„Ø­Ø§Ù†', 'Ù…Ø­ÙÙˆØ¸Ø§Øª', 'Ø¥Ø¯Ø§Ø±ÙŠ', 'Ù…Ø³Ø§Ø¹Ø¯'
        ];

        // Generate Random Code
        function generateCode(prefix = '') {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = prefix;
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // LocalStorage Helper Functions
        function saveToStorage(key, data) {
            try {
                localStorage.setItem(key, JSON.stringify(data));
                return true;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showToast('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
                return false;
            }
        }

        function loadFromStorage(key, defaultValue = []) {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : defaultValue;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                return defaultValue;
            }
        }

        // Initialize System
        async function initializeSystem() {
            try {
                // Initialize Element SDK
                if (window.elementSdk) {
                    await window.elementSdk.init({
                        defaultConfig,
                        onConfigChange: async (config) => {
                            document.getElementById('systemTitle').textContent = config.system_title || defaultConfig.system_title;
                            document.getElementById('centerName').textContent = config.center_name || defaultConfig.center_name;
                            document.getElementById('churchName').textContent = config.church_name || defaultConfig.church_name;
                        },
                        mapToCapabilities: (config) => ({
                            recolorables: [],
                            borderables: [],
                            fontEditable: undefined,
                            fontSizeable: undefined
                        }),
                        mapToEditPanelValues: (config) => new Map([
                            ["system_title", config.system_title || defaultConfig.system_title],
                            ["center_name", config.center_name || defaultConfig.center_name],
                            ["church_name", config.church_name || defaultConfig.church_name]
                        ])
                    });
                }

                // Initialize Data SDK
                if (window.dataSdk) {
                    const dataHandler = {
                        onDataChanged(data) {
                            console.log('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', data.length);
                        }
                    };
                    
                    const result = await window.dataSdk.init(dataHandler);
                    if (result.isOk) {
                        console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Data SDK Ø¨Ù†Ø¬Ø§Ø­');
                    }
                }

                // Initialize default admin if not exists
                const admin = loadFromStorage(STORAGE_KEYS.ADMIN, null);
                if (!admin) {
                    saveToStorage(STORAGE_KEYS.ADMIN, DEFAULT_ADMIN);
                }

                // Load initial data
                updateDashboardStats();
                
                console.log('âœ… ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­');
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…:', error);
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…', 'error');
            }
        }

        // Navigation functions
        function showSection(sectionId) {
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
            
            document.querySelectorAll('#mainNavigation .nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Login functions
        function switchLoginTab(tab) {
            currentLoginTab = tab;
            
            document.querySelectorAll('[id$="Tab"]').forEach(tabBtn => {
                tabBtn.className = 'flex-1 py-3 px-4 text-center font-semibold text-gray-500';
            });
            
            const colors = {
                admin: 'text-red-600 border-b-2 border-red-600',
                teacher: 'text-green-600 border-b-2 border-green-600',
                student: 'text-blue-600 border-b-2 border-blue-600'
            };
            
            document.getElementById(tab + 'Tab').className += ' ' + colors[tab];
            
            document.getElementById('adminLogin').classList.toggle('hidden', tab !== 'admin');
            document.getElementById('teacherLogin').classList.toggle('hidden', tab !== 'teacher');
            document.getElementById('studentLogin').classList.toggle('hidden', tab !== 'student');
            
            const buttonColors = {
                admin: 'bg-red-600 hover:bg-red-700',
                teacher: 'bg-green-600 hover:bg-green-700',
                student: 'bg-blue-600 hover:bg-blue-700'
            };
            
            const buttonTexts = {
                admin: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©',
                teacher: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…',
                student: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¯Ø§Ø±Ø³'
            };
            
            const loginButton = document.getElementById('loginButton');
            loginButton.className = `w-full ${buttonColors[tab]} text-white py-3 px-4 rounded-lg font-semibold transition-colors`;
            document.getElementById('loginButtonText').textContent = buttonTexts[tab];
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            const spinner = document.getElementById('loginSpinner');
            const buttonText = document.getElementById('loginButtonText');
            
            spinner.classList.remove('hidden');
            buttonText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
            
            try {
                let loginSuccess = false;
                let userData = null;
                
                if (currentLoginTab === 'student') {
                    const code = document.getElementById('studentCode').value.trim().toUpperCase();
                    
                    if (!code) {
                        showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø§Ø±Ø³', 'error');
                        return;
                    }
                    
                    const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
                    userData = students.find(s => s.code === code);
                    
                    if (userData) {
                        currentUser = { type: 'student', data: userData };
                        loginSuccess = true;
                        showStudentDashboard();
                    }
                } else if (currentLoginTab === 'teacher') {
                    const code = document.getElementById('teacherCode').value.trim().toUpperCase();
                    const password = document.getElementById('teacherPassword').value.trim();
                    
                    if (!code || !password) {
                        showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±', 'error');
                        return;
                    }
                    
                    const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
                    userData = teachers.find(t => t.code === code && t.password === password);
                    
                    if (userData) {
                        currentUser = { type: 'teacher', data: userData };
                        loginSuccess = true;
                        showTeacherDashboard();
                    }
                } else if (currentLoginTab === 'admin') {
                    const username = document.getElementById('adminUsername').value.trim();
                    const password = document.getElementById('adminPassword').value.trim();
                    
                    if (!username || !password) {
                        showToast('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±', 'error');
                        return;
                    }
                    
                    const admin = loadFromStorage(STORAGE_KEYS.ADMIN, DEFAULT_ADMIN);
                    
                    if (username === admin.username && password === admin.password) {
                        currentUser = { type: 'admin', data: admin };
                        loginSuccess = true;
                        showAdminDashboard();
                    }
                }
                
                if (loginSuccess) {
                    showToast(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ${userData ? userData.name : currentUser.data.name}`, 'success');
                    document.getElementById('loginForm').reset();
                    updateUserInfo();
                } else {
                    showToast('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
                }
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
                showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', 'error');
            } finally {
                spinner.classList.add('hidden');
                const buttonTexts = {
                    admin: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©',
                    teacher: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…',
                    student: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¯Ø§Ø±Ø³'
                };
                buttonText.textContent = buttonTexts[currentLoginTab];
            }
        }

        function updateUserInfo() {
            const userInfo = document.getElementById('userInfo');
            const userName = document.getElementById('userName');
            const userRole = document.getElementById('userRole');
            
            if (currentUser) {
                userInfo.classList.remove('hidden');
                userName.textContent = currentUser.data.name;
                
                const roleTexts = {
                    admin: 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…',
                    teacher: 'Ø®Ø§Ø¯Ù… - ' + (currentUser.data.specialty || ''),
                    student: 'Ø¯Ø§Ø±Ø³ - ' + (currentUser.data.stage || '')
                };
                
                userRole.textContent = roleTexts[currentUser.type];
            } else {
                userInfo.classList.add('hidden');
            }
        }

        function showAdminDashboard() {
            showSection('adminDashboard');
            document.getElementById('adminNavigation').classList.remove('hidden');
            document.getElementById('teacherNavigation').classList.add('hidden');
            document.getElementById('studentNavigation').classList.add('hidden');
            updateDashboardStats();
        }

        function showTeacherDashboard() {
            showSection('teacherDashboard');
            document.getElementById('adminNavigation').classList.add('hidden');
            document.getElementById('teacherNavigation').classList.remove('hidden');
            document.getElementById('studentNavigation').classList.add('hidden');
            
            const welcome = document.getElementById('teacherWelcome');
            welcome.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.data.name} - ${currentUser.data.specialty}`;
        }

        function showStudentDashboard() {
            showSection('studentDashboard');
            document.getElementById('adminNavigation').classList.add('hidden');
            document.getElementById('teacherNavigation').classList.add('hidden');
            document.getElementById('studentNavigation').classList.remove('hidden');
            
            const welcome = document.getElementById('studentWelcome');
            welcome.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.data.name} - ${currentUser.data.stage}`;
        }

        function logout() {
            currentUser = null;
            document.getElementById('adminNavigation').classList.add('hidden');
            document.getElementById('teacherNavigation').classList.add('hidden');
            document.getElementById('studentNavigation').classList.add('hidden');
            updateUserInfo();
            showSection('home');
            showToast('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Admin Sections
        function showAdminSection(section) {
            const content = document.getElementById('adminContent');
            
            if (section === 'dashboard') {
                const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
                const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
                
                content.innerHTML = `
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-blue-50 rounded-lg p-6">
                            <h3 class="text-xl font-bold text-blue-800 mb-4">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ†:</span>
                                    <span class="font-bold">${students.length}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø¯Ø§Ù…:</span>
                                    <span class="font-bold">${teachers.length}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø¹Ø§Ù…:</span>
                                    <span class="font-bold text-green-600">85%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 rounded-lg p-6">
                            <h3 class="text-xl font-bold text-green-800 mb-4">ğŸ¯ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
                            <div class="space-y-2">
                                <button onclick="showAdminSection('students')" class="w-full text-right p-3 bg-white rounded hover:bg-gray-50 transition-colors">
                                    ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ†
                                </button>
                                <button onclick="showAdminSection('teachers')" class="w-full text-right p-3 bg-white rounded hover:bg-gray-50 transition-colors">
                                    ğŸ‘¨â€ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ø§Ù…
                                </button>
                                <button onclick="showAdminSection('backup')" class="w-full text-right p-3 bg-white rounded hover:bg-gray-50 transition-colors">
                                    ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else if (section === 'students') {
                showStudentsManagement();
            } else if (section === 'teachers') {
                showTeachersManagement();
            } else if (section === 'attendance') {
                showAttendanceManagement();
            } else if (section === 'grades') {
                showGradesManagement();
            } else if (section === 'backup') {
                showBackupPage();
            }
        }

        // Students Management
        function showStudentsManagement() {
            const content = document.getElementById('adminContent');
            const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
            
            content.innerHTML = `
                <div class="mb-6 flex justify-between items-center">
                    <h3 class="text-2xl font-bold text-gray-800">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ†</h3>
                    <button onclick="showAddStudentForm()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                        â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ø±Ø³ Ø¬Ø¯ÙŠØ¯
                    </button>
                </div>
                
                <div class="bg-white rounded-lg p-4">
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="p-3 text-right">Ø§Ù„ÙƒÙˆØ¯</th>
                                    <th class="p-3 text-right">Ø§Ù„Ø§Ø³Ù…</th>
                                    <th class="p-3 text-center">Ø§Ù„Ù†ÙˆØ¹</th>
                                    <th class="p-3 text-center">Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th>
                                    <th class="p-3 text-center">Ø§Ù„ÙØµÙ„</th>
                                    <th class="p-3 text-center">Ø§Ù„Ù‡Ø§ØªÙ</th>
                                    <th class="p-3 text-center">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${students.length === 0 ? `
                                    <tr>
                                        <td colspan="7" class="p-8 text-center text-gray-500">
                                            Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯Ø§Ø±Ø³ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¨Ø¹Ø¯
                                        </td>
                                    </tr>
                                ` : students.map(student => `
                                    <tr class="border-b hover:bg-gray-50">
                                        <td class="p-3 font-mono text-sm">${student.code}</td>
                                        <td class="p-3 font-semibold">${student.name}</td>
                                        <td class="p-3 text-center">${student.gender}</td>
                                        <td class="p-3 text-center">${student.stage}</td>
                                        <td class="p-3 text-center">${student.className}</td>
                                        <td class="p-3 text-center">${student.phone1}</td>
                                        <td class="p-3 text-center">
                                            <button onclick="editStudent('${student.code}')" class="text-blue-600 hover:text-blue-800 mx-1">âœï¸</button>
                                            <button onclick="deleteStudent('${student.code}')" class="text-red-600 hover:text-red-800 mx-1">ğŸ—‘ï¸</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function showAddStudentForm() {
            const modal = createModal('Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ø±Ø³ Ø¬Ø¯ÙŠØ¯', `
                <form id="addStudentForm" onsubmit="saveStudent(event)" class="space-y-4">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ø³Ù… Ø§Ù„Ø¯Ø§Ø±Ø³ *</label>
                            <input type="text" name="name" required class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ù„Ù†ÙˆØ¹ *</label>
                            <select name="gender" required class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
                                <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
                            <input type="date" name="birthDate" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© *</label>
                            <select name="stage" required class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                ${STAGES.map(stage => `<option value="${stage}">${stage}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø±Ù‚Ù… Ù‡Ø§ØªÙ 1 *</label>
                            <input type="tel" name="phone1" required class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø±Ù‚Ù… Ù‡Ø§ØªÙ 2</label>
                            <input type="tel" name="phone2" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø­Ø±Ù Ø§Ù„ÙØµÙ„</label>
                            <select name="classLetter" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ù„ÙØµÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±ÙƒØ²</label>
                            <select name="className" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                ${CLASSES.map(cls => `<option value="${cls}">${cls}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø±ØªØ¨Ø© Ø§Ù„Ø´Ù…Ø§Ø³ÙŠØ©</label>
                            <input type="text" name="rank" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                            <input type="text" name="address" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="flex items-center">
                            <input type="checkbox" name="hasForm" id="hasForm" class="ml-2">
                            <label for="hasForm" class="text-sm">Ø§Ø³ØªÙ…Ø§Ø±Ø©</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" name="hasPhoto" id="hasPhoto" class="ml-2">
                            <label for="hasPhoto" class="text-sm">ØµÙˆØ±Ø©</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" name="formPaid" id="formPaid" class="ml-2">
                            <label for="formPaid" class="text-sm">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©</label>
                        </div>
                    </div>
                    
                    <div class="flex justify-end gap-2 mt-6">
                        <button type="button" onclick="closeModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">
                            Ø¥Ù„ØºØ§Ø¡
                        </button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            Ø­ÙØ¸
                        </button>
                    </div>
                </form>
            `);
        }

        function saveStudent(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
            
            const newStudent = {
                code: generateCode(''),
                name: formData.get('name'),
                gender: formData.get('gender'),
                birthDate: formData.get('birthDate'),
                stage: formData.get('stage'),
                phone1: formData.get('phone1'),
                phone2: formData.get('phone2'),
                classLetter: formData.get('classLetter'),
                className: formData.get('className'),
                rank: formData.get('rank'),
                address: formData.get('address'),
                hasForm: formData.get('hasForm') === 'on',
                hasPhoto: formData.get('hasPhoto') === 'on',
                formPaid: formData.get('formPaid') === 'on',
                createdAt: new Date().toISOString()
            };
            
            students.push(newStudent);
            
            if (saveToStorage(STORAGE_KEYS.STUDENTS, students)) {
                showToast(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø§Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­ - Ø§Ù„ÙƒÙˆØ¯: ${newStudent.code}`, 'success');
                closeModal();
                showStudentsManagement();
                updateDashboardStats();
            }
        }

        function deleteStudent(code) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø§Ø±Ø³ØŸ')) return;
            
            const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
            const filtered = students.filter(s => s.code !== code);
            
            if (saveToStorage(STORAGE_KEYS.STUDENTS, filtered)) {
                showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯Ø§Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                showStudentsManagement();
                updateDashboardStats();
            }
        }

        // Teachers Management
        function showTeachersManagement() {
            const content = document.getElementById('adminContent');
            const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
            
            content.innerHTML = `
                <div class="mb-6 flex justify-between items-center">
                    <h3 class="text-2xl font-bold text-gray-800">ğŸ‘¨â€ğŸ« Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ø§Ù…</h3>
                    <button onclick="showAddTeacherForm()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                        â• Ø¥Ø¶Ø§ÙØ© Ø®Ø§Ø¯Ù… Ø¬Ø¯ÙŠØ¯
                    </button>
                </div>
                
                <div class="bg-white rounded-lg p-4">
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="p-3 text-right">Ø§Ù„ÙƒÙˆØ¯</th>
                                    <th class="p-3 text-right">Ø§Ù„Ø§Ø³Ù…</th>
                                    <th class="p-3 text-center">Ø§Ù„ØªØ®ØµØµ</th>
                                    <th class="p-3 text-center">Ø§Ù„ÙØµÙ„</th>
                                    <th class="p-3 text-center">Ø§Ù„Ù‡Ø§ØªÙ</th>
                                    <th class="p-3 text-center">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${teachers.length === 0 ? `
                                    <tr>
                                        <td colspan="6" class="p-8 text-center text-gray-500">
                                            Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø®Ø¯Ø§Ù… Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¨Ø¹Ø¯
                                        </td>
                                    </tr>
                                ` : teachers.map(teacher => `
                                    <tr class="border-b hover:bg-gray-50">
                                        <td class="p-3 font-mono text-sm">${teacher.code}</td>
                                        <td class="p-3 font-semibold">${teacher.name}</td>
                                        <td class="p-3 text-center">${teacher.specialty}</td>
                                        <td class="p-3 text-center">${teacher.className}</td>
                                        <td class="p-3 text-center">${teacher.phone}</td>
                                        <td class="p-3 text-center">
                                            <button onclick="editTeacher('${teacher.code}')" class="text-blue-600 hover:text-blue-800 mx-1">âœï¸</button>
                                            <button onclick="deleteTeacher('${teacher.code}')" class="text-red-600 hover:text-red-800 mx-1">ğŸ—‘ï¸</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function showAddTeacherForm() {
            const modal = createModal('Ø¥Ø¶Ø§ÙØ© Ø®Ø§Ø¯Ù… Ø¬Ø¯ÙŠØ¯', `
                <form id="addTeacherForm" onsubmit="saveTeacher(event)" class="space-y-4">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ø³Ù… Ø§Ù„Ø®Ø§Ø¯Ù… *</label>
                            <input type="text" name="name" required class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                            <input type="tel" name="phone" required class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ù„ØªØ®ØµØµ *</label>
                            <select name="specialty" required class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                ${SPECIALTIES.map(spec => `<option value="${spec}">${spec}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ø§Ù„ÙØµÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù†Ù‡</label>
                            <select name="className" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                ${CLASSES.map(cls => `<option value="${cls}">${cls}</option>`).join('')}
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *</label>
                            <input type="password" name="password" required class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    
                    <div class="flex justify-end gap-2 mt-6">
                        <button type="button" onclick="closeModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">
                            Ø¥Ù„ØºØ§Ø¡
                        </button>
                        <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            Ø­ÙØ¸
                        </button>
                    </div>
                </form>
            `);
        }

        function saveTeacher(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
            
            const newTeacher = {
                code: generateCode(''),
                name: formData.get('name'),
                phone: formData.get('phone'),
                specialty: formData.get('specialty'),
                className: formData.get('className'),
                password: formData.get('password'),
                createdAt: new Date().toISOString()
            };
            
            teachers.push(newTeacher);
            
            if (saveToStorage(STORAGE_KEYS.TEACHERS, teachers)) {
                showToast(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­ - Ø§Ù„ÙƒÙˆØ¯: ${newTeacher.code}`, 'success');
                closeModal();
                showTeachersManagement();
                updateDashboardStats();
            }
        }

        function deleteTeacher(code) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø®Ø§Ø¯Ù…ØŸ')) return;
            
            const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
            const filtered = teachers.filter(t => t.code !== code);
            
            if (saveToStorage(STORAGE_KEYS.TEACHERS, filtered)) {
                showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
                showTeachersManagement();
                updateDashboardStats();
            }
        }

        // Attendance Management
        function showAttendanceManagement() {
            const content = document.getElementById('adminContent');
            content.innerHTML = `
                <div class="text-center py-12">
                    <div class="text-6xl mb-4">ğŸ“</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨</h3>
                    <p class="text-gray-600">Ù‚Ø±ÙŠØ¨Ø§Ù‹...</p>
                </div>
            `;
        }

        // Grades Management
        function showGradesManagement() {
            const content = document.getElementById('adminContent');
            content.innerHTML = `
                <div class="text-center py-12">
                    <div class="text-6xl mb-4">ğŸ“ˆ</div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</h3>
                    <p class="text-gray-600">Ù‚Ø±ÙŠØ¨Ø§Ù‹...</p>
                </div>
            `;
        }

        // Backup Page
        function showBackupPage() {
            const content = document.getElementById('adminContent');
            
            content.innerHTML = `
                <div class="space-y-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø©</h3>
                    
                    <!-- Students Backup -->
                    <div class="backup-card bg-white rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <div class="text-3xl ml-3">ğŸ‘¥</div>
                            <h4 class="text-xl font-bold text-gray-800">Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù„Ø¯Ø§Ø±Ø³ÙŠÙ†</h4>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">ğŸ“¤ ØªØµØ¯ÙŠØ±</h5>
                                <div class="space-y-2">
                                    <button onclick="exportStudentsExcel()" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                        ğŸ“Š ØªØµØ¯ÙŠØ± Excel
                                    </button>
                                    <button onclick="exportStudentsJSON()" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        ğŸ“„ ØªØµØ¯ÙŠØ± JSON
                                    </button>
                                </div>
                            </div>
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</h5>
                                <div class="space-y-2">
                                    <button onclick="document.getElementById('importStudentsExcel').click()" class="w-full bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors">
                                        ğŸ“Š Ø§Ø³ØªÙŠØ±Ø§Ø¯ Excel
                                    </button>
                                    <button onclick="document.getElementById('importStudentsJSON').click()" class="w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                        ğŸ“„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON
                                    </button>
                                    <input type="file" id="importStudentsExcel" accept=".xlsx,.xls" onchange="importStudentsExcel(event)" class="hidden">
                                    <input type="file" id="importStudentsJSON" accept=".json" onchange="importStudentsJSON(event)" class="hidden">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Teachers Backup -->
                    <div class="backup-card bg-white rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <div class="text-3xl ml-3">ğŸ‘¨â€ğŸ«</div>
                            <h4 class="text-xl font-bold text-gray-800">Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù„Ø®Ø¯Ø§Ù…</h4>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">ğŸ“¤ ØªØµØ¯ÙŠØ±</h5>
                                <div class="space-y-2">
                                    <button onclick="exportTeachersExcel()" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                        ğŸ“Š ØªØµØ¯ÙŠØ± Excel
                                    </button>
                                    <button onclick="exportTeachersJSON()" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        ğŸ“„ ØªØµØ¯ÙŠØ± JSON
                                    </button>
                                </div>
                            </div>
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</h5>
                                <div class="space-y-2">
                                    <button onclick="document.getElementById('importTeachersExcel').click()" class="w-full bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors">
                                        ğŸ“Š Ø§Ø³ØªÙŠØ±Ø§Ø¯ Excel
                                    </button>
                                    <button onclick="document.getElementById('importTeachersJSON').click()" class="w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                        ğŸ“„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON
                                    </button>
                                    <input type="file" id="importTeachersExcel" accept=".xlsx,.xls" onchange="importTeachersExcel(event)" class="hidden">
                                    <input type="file" id="importTeachersJSON" accept=".json" onchange="importTeachersJSON(event)" class="hidden">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Full Backup -->
                    <div class="backup-card bg-white rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <div class="text-3xl ml-3">ğŸ—„ï¸</div>
                            <h4 class="text-xl font-bold text-gray-800">Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙƒØ§Ù…Ù„ Ù„Ù„Ù†Ø¸Ø§Ù…</h4>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">ğŸ“¤ ØªØµØ¯ÙŠØ±</h5>
                                <div class="space-y-2">
                                    <button onclick="exportFullExcel()" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                        ğŸ“Š ØªØµØ¯ÙŠØ± Excel ÙƒØ§Ù…Ù„
                                    </button>
                                    <button onclick="exportFullJSON()" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        ğŸ“„ ØªØµØ¯ÙŠØ± JSON ÙƒØ§Ù…Ù„
                                    </button>
                                </div>
                            </div>
                            <div>
                                <h5 class="font-semibold text-gray-700 mb-2">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</h5>
                                <div class="space-y-2">
                                    <button onclick="document.getElementById('importFullJSON').click()" class="w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                        ğŸ“„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON ÙƒØ§Ù…Ù„
                                    </button>
                                    <input type="file" id="importFullJSON" accept=".json" onchange="importFullJSON(event)" class="hidden">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Danger Zone -->
                    <div class="danger-zone rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <div class="text-3xl ml-3">âš ï¸</div>
                            <h4 class="text-xl font-bold text-red-800">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø·Ø±</h4>
                        </div>
                        <p class="text-red-700 mb-4">ØªØ­Ø°ÙŠØ±: Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!</p>
                        <button onclick="deleteAllData()" class="bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors font-bold">
                            ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                        </button>
                    </div>
                </div>
            `;
        }

        // Export Functions
        function exportStudentsExcel() {
            const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
            
            if (students.length === 0) {
                showToast('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯Ø§Ø±Ø³ÙŠÙ† Ù„ØªØµØ¯ÙŠØ±Ù‡Ù…', 'error');
                return;
            }
            
            const ws = XLSX.utils.json_to_sheet(students);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Students');
            XLSX.writeFile(wb, `students_${new Date().toISOString().split('T')[0]}.xlsx`);
            
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportStudentsJSON() {
            const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
            
            if (students.length === 0) {
                showToast('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯Ø§Ø±Ø³ÙŠÙ† Ù„ØªØµØ¯ÙŠØ±Ù‡Ù…', 'error');
                return;
            }
            
            const dataStr = JSON.stringify(students, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `students_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø§Ø±Ø³ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportTeachersExcel() {
            const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
            
            if (teachers.length === 0) {
                showToast('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø®Ø¯Ø§Ù… Ù„ØªØµØ¯ÙŠØ±Ù‡Ù…', 'error');
                return;
            }
            
            const ws = XLSX.utils.json_to_sheet(teachers);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Teachers');
            XLSX.writeFile(wb, `teachers_${new Date().toISOString().split('T')[0]}.xlsx`);
            
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¯Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportTeachersJSON() {
            const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
            
            if (teachers.length === 0) {
                showToast('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø®Ø¯Ø§Ù… Ù„ØªØµØ¯ÙŠØ±Ù‡Ù…', 'error');
                return;
            }
            
            const dataStr = JSON.stringify(teachers, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `teachers_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¯Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportFullExcel() {
            const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
            const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
            const attendance = loadFromStorage(STORAGE_KEYS.ATTENDANCE, []);
            const grades = loadFromStorage(STORAGE_KEYS.GRADES, []);
            
            const wb = XLSX.utils.book_new();
            
            if (students.length > 0) {
                const ws1 = XLSX.utils.json_to_sheet(students);
                XLSX.utils.book_append_sheet(wb, ws1, 'Students');
            }
            
            if (teachers.length > 0) {
                const ws2 = XLSX.utils.json_to_sheet(teachers);
                XLSX.utils.book_append_sheet(wb, ws2, 'Teachers');
            }
            
            if (attendance.length > 0) {
                const ws3 = XLSX.utils.json_to_sheet(attendance);
                XLSX.utils.book_append_sheet(wb, ws3, 'Attendance');
            }
            
            if (grades.length > 0) {
                const ws4 = XLSX.utils.json_to_sheet(grades);
                XLSX.utils.book_append_sheet(wb, ws4, 'Grades');
            }
            
            XLSX.writeFile(wb, `alhabeeb_full_backup_${new Date().toISOString().split('T')[0]}.xlsx`);
            
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportFullJSON() {
            const fullBackup = {
                students: loadFromStorage(STORAGE_KEYS.STUDENTS, []),
                teachers: loadFromStorage(STORAGE_KEYS.TEACHERS, []),
                attendance: loadFromStorage(STORAGE_KEYS.ATTENDANCE, []),
                grades: loadFromStorage(STORAGE_KEYS.GRADES, []),
                homework: loadFromStorage(STORAGE_KEYS.HOMEWORK, []),
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(fullBackup, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `alhabeeb_full_backup_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Import Functions
        function importStudentsExcel(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, { type: 'array' });
                    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                    const students = XLSX.utils.sheet_to_json(firstSheet);
                    
                    if (saveToStorage(STORAGE_KEYS.STUDENTS, students)) {
                        showToast(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${students.length} Ø¯Ø§Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­`, 'success');
                        showStudentsManagement();
                        updateDashboardStats();
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù:', error);
                    showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsArrayBuffer(file);
        }

        function importStudentsJSON(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const students = JSON.parse(e.target.result);
                    
                    if (saveToStorage(STORAGE_KEYS.STUDENTS, students)) {
                        showToast(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${students.length} Ø¯Ø§Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­`, 'success');
                        showStudentsManagement();
                        updateDashboardStats();
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù:', error);
                    showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsText(file);
        }

        function importTeachersExcel(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, { type: 'array' });
                    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                    const teachers = XLSX.utils.sheet_to_json(firstSheet);
                    
                    if (saveToStorage(STORAGE_KEYS.TEACHERS, teachers)) {
                        showToast(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${teachers.length} Ø®Ø§Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­`, 'success');
                        showTeachersManagement();
                        updateDashboardStats();
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù:', error);
                    showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsArrayBuffer(file);
        }

        function importTeachersJSON(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const teachers = JSON.parse(e.target.result);
                    
                    if (saveToStorage(STORAGE_KEYS.TEACHERS, teachers)) {
                        showToast(`ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${teachers.length} Ø®Ø§Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­`, 'success');
                        showTeachersManagement();
                        updateDashboardStats();
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù:', error);
                    showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsText(file);
        }

        function importFullJSON(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backup = JSON.parse(e.target.result);
                    
                    if (backup.students) saveToStorage(STORAGE_KEYS.STUDENTS, backup.students);
                    if (backup.teachers) saveToStorage(STORAGE_KEYS.TEACHERS, backup.teachers);
                    if (backup.attendance) saveToStorage(STORAGE_KEYS.ATTENDANCE, backup.attendance);
                    if (backup.grades) saveToStorage(STORAGE_KEYS.GRADES, backup.grades);
                    if (backup.homework) saveToStorage(STORAGE_KEYS.HOMEWORK, backup.homework);
                    
                    showToast('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
                    updateDashboardStats();
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù:', error);
                    showToast('Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù', 'error');
                }
            };
            reader.readAsText(file);
        }

        function deleteAllData() {
            const confirmation = prompt('Ù„Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø§ÙƒØªØ¨ "DELETE" Ø¨Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„ÙƒØ¨ÙŠØ±Ø©:');
            
            if (confirmation === 'DELETE') {
                localStorage.removeItem(STORAGE_KEYS.STUDENTS);
                localStorage.removeItem(STORAGE_KEYS.TEACHERS);
                localStorage.removeItem(STORAGE_KEYS.ATTENDANCE);
                localStorage.removeItem(STORAGE_KEYS.GRADES);
                localStorage.removeItem(STORAGE_KEYS.HOMEWORK);
                
                showToast('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
                updateDashboardStats();
                showBackupPage();
            } else {
                showToast('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', 'error');
            }
        }

        // Teacher Sections
        function showTeacherSection(section) {
            const content = document.getElementById('teacherContent');
            
            if (section === 'dashboard') {
                content.innerHTML = `
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">ğŸ¯</div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">Ù„ÙˆØ­Ø© Ø§Ù„Ø®Ø§Ø¯Ù…</h3>
                        <p class="text-gray-600">Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.data.name}</p>
                    </div>
                `;
            }
        }

        // Student Sections
        function showStudentSection(section) {
            const content = document.getElementById('studentContent');
            
            if (section === 'profile') {
                const student = currentUser.data;
                
                content.innerHTML = `
                    <div class="bg-purple-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-purple-800 mb-4">ğŸ‘¤ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>Ø§Ù„Ø§Ø³Ù…:</span>
                                <span class="font-semibold">${student.name}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø§Ø±Ø³:</span>
                                <span class="font-semibold font-mono">${student.code}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ø§Ù„Ù†ÙˆØ¹:</span>
                                <span class="font-semibold">${student.gender}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ø§Ù„Ù…Ø±Ø­Ù„Ø©:</span>
                                <span class="font-semibold">${student.stage}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ø§Ù„ÙØµÙ„:</span>
                                <span class="font-semibold">${student.className}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</span>
                                <span class="font-semibold">${student.phone1}</span>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Update Dashboard Stats
        function updateDashboardStats() {
            const students = loadFromStorage(STORAGE_KEYS.STUDENTS, []);
            const teachers = loadFromStorage(STORAGE_KEYS.TEACHERS, []);
            
            const totalStudentsEl = document.getElementById('totalStudentsCount');
            const totalTeachersEl = document.getElementById('totalTeachersCount');
            
            if (totalStudentsEl) totalStudentsEl.textContent = students.length;
            if (totalTeachersEl) totalTeachersEl.textContent = teachers.length;
        }

        // Modal Helper
        function createModal(title, content) {
            const modal = document.createElement('div');
            modal.id = 'customModal';
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-800">${title}</h2>
                            <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                        </div>
                        ${content}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            return modal;
        }

        function closeModal() {
            const modal = document.getElementById('customModal');
            if (modal) modal.remove();
        }

        // Toast Notification
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-600' : 'bg-red-600'
            } text-white`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializeSystem);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99d48f9583bf73af',t:'MTc2MjkzNTExMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
