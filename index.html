<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุฑูุฒ ุงูุญุจูุจ ููุฃูุญุงู ูุงูุฏุฑุงุณุงุช ุงููุจุทูุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap');
        
        * {
            font-family: 'Amiri', serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #8B4513 0%, #DAA520 50%, #8B0000 100%);
        }
        
        .card-shadow {
            box-shadow: 0 8px 32px rgba(139, 69, 19, 0.15);
        }
        
        .hover-lift {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(139, 69, 19, 0.25);
        }
        
        .coptic-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23DAA520' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .nav-item {
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: #DAA520;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-item:hover::before,
        .nav-item.active::before {
            width: 100%;
        }
    </style>
</head>
<body class="bg-gray-50 coptic-pattern">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4 space-x-reverse">
                    <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center">
                        <svg class="w-10 h-10 text-yellow-600" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"/>
                            <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">ูุฑูุฒ ุงูุญุจูุจ ููุฃูุญุงู ูุงูุฏุฑุงุณุงุช ุงููุจุทูุฉ</h1>
                        <p class="text-yellow-200">ูููุณุฉ ุงูุณูุฏุฉ ุงูุนุฐุฑุงุก ูุงููุฏูุณ ูุงุฑ ููุญูุง - ุงููุณุงูู - ููุตู</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-center space-x-8 space-x-reverse py-4">
                <button class="nav-item active px-4 py-2 text-gray-700 hover:text-yellow-600 font-semibold transition-colors" onclick="showSection('home')">
                    ๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
                </button>
                <button class="nav-item px-4 py-2 text-gray-700 hover:text-yellow-600 font-semibold transition-colors" onclick="showSection('curriculum')">
                    ๐ ุงูููุงูุฌ
                </button>
                <button class="nav-item px-4 py-2 text-gray-700 hover:text-yellow-600 font-semibold transition-colors" onclick="showSection('events')">
                    ๐ ุงูุญููุงุช ูุงูููุงุณุจุงุช
                </button>
                <button class="nav-item px-4 py-2 text-gray-700 hover:text-yellow-600 font-semibold transition-colors" onclick="showSection('news')">
                    ๐ฐ ุงูุฃุฎุจุงุฑ
                </button>
                <button id="reportsNavButton" class="nav-item px-4 py-2 text-gray-700 hover:text-yellow-600 font-semibold transition-colors hidden" onclick="showSection('reports')">
                    ๐ ุงูุชูุงุฑูุฑ
                </button>
                <button class="nav-item px-4 py-2 text-gray-700 hover:text-yellow-600 font-semibold transition-colors" onclick="showSection('login')">
                    ๐ ุชุณุฌูู ุงูุฏุฎูู
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Home Section -->
        <section id="home" class="section-content fade-in">
            <div class="grid md:grid-cols-2 gap-8 mb-12">
                <div class="bg-white rounded-lg p-8 card-shadow hover-lift">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">ูุฑุญุจุงู ุจูู ูู ูุฑูุฒ ุงูุญุจูุจ</h2>
                    <p class="text-gray-600 leading-relaxed text-lg mb-6">
                        ููุตุฉ ุฅููุชุฑูููุฉ ุชุนููููุฉ ูุฑูุญูุฉ ูุชูุงููุฉ ุชูุฏู ุฅูู ุฎุฏูุฉ ุฏุงุฑุณู ุงูุฃูุญุงู ูุงูุทููุณ ุงูููุณูุฉ ูุงููุบุฉ ุงููุจุทูุฉ. 
                        ูููุฑ ุชุฌุฑุจุฉ ุณููุฉ ูููุธูุฉ ููู ูู ุงูุฏุงุฑุณูู ูุงูุฎุฏุงู ูู ุฑุญูุฉ ุงูุชุนูู ุงูุฑูุญู.
                    </p>
                    
                    <!-- ุดุนุงุฑ ุงูุฎุฏูุฉ -->
                    <div class="bg-gradient-to-r from-yellow-50 to-red-50 border-2 border-yellow-300 rounded-lg p-6 mb-6 text-center">
                        <div class="flex justify-center items-center gap-4 mb-4">
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center">
                                <span class="text-2xl">๐ง</span>
                            </div>
                            <div class="text-4xl font-bold text-yellow-600">โข</div>
                            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center">
                                <span class="text-2xl">๐</span>
                            </div>
                            <div class="text-4xl font-bold text-red-600">โข</div>
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center">
                                <span class="text-2xl">๐</span>
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-3">ุดุนุงุฑ ุงูุฎุฏูุฉ</h3>
                        <div class="flex justify-center items-center gap-6 text-xl font-bold">
                            <span class="text-yellow-700 bg-yellow-100 px-4 py-2 rounded-full">ุฃููู</span>
                            <span class="text-red-700 bg-red-100 px-4 py-2 rounded-full">ุตููู</span>
                            <span class="text-green-700 bg-green-100 px-4 py-2 rounded-full">ุงุณุชูุชุน</span>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 border-r-4 border-blue-500 p-6 rounded-lg">
                        <h3 class="font-bold text-blue-800 mb-3 text-xl">๐ฏ ุฑุคูุชูุง</h3>
                        <p class="text-blue-700 leading-relaxed text-lg mb-4">
                            ุฑุคูุชูุง ุฃู ุงูุดุนุจ ููู ูุณุชูุชุน ุจููุชูุฑุฌูุฉ ุงููููุณุฉ ูู ูุฏุงุณ ูุชุณุจุญุฉ ูุตููุงุช ูุฎุชููุฉ... 
                            ูุตูู ุจุงูุฑูุญ ูุงูุฐูู ุฃูุถุงู
                        </p>
                        <div class="bg-white rounded-lg p-4 border-2 border-blue-200">
                            <p class="text-center text-blue-800 font-bold text-lg">
                                "ูุตูู ุจุงูุฑูุญ ูุงูุฐูู ุฃูุถุงู" - 1 ููุฑูุซูุณ 14:15
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-8 card-shadow hover-lift">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">ููุงุนูุฏ ุงูุฎุฏูุฉ</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-red-50 rounded-lg">
                            <span class="font-semibold text-red-800">ุชูููุฏู</span>
                            <span class="text-red-600">ุงูุฌูุนุฉ 3:00 - 4:00 ูุณุงุกู</span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-yellow-50 rounded-lg">
                            <span class="font-semibold text-yellow-800">ุฃููู ูุซุงููุฉ</span>
                            <span class="text-yellow-600">ุงูุฌูุนุฉ 3:00 - 4:00 ูุณุงุกู</span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-green-50 rounded-lg">
                            <span class="font-semibold text-green-800">ุซุงูุซุฉ ูุฑุงุจุนุฉ</span>
                            <span class="text-green-600">ุงูุฌูุนุฉ 5:00 - 7:00 ูุณุงุกู</span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-blue-50 rounded-lg">
                            <span class="font-semibold text-blue-800">ุฎุงูุณุฉ ูุณุงุฏุณุฉ</span>
                            <span class="text-blue-600">ุงูุฌูุนุฉ 5:00 - 7:00 ูุณุงุกู</span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-purple-50 rounded-lg">
                            <span class="font-semibold text-purple-800">ุฅุนุฏุงุฏู - ุซุงููู</span>
                            <span class="text-purple-600">ุงูุฌูุนุฉ 5:00 - 7:00 ูุณุงุกู</span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-indigo-50 rounded-lg">
                            <span class="font-semibold text-indigo-800">ุดุจุงุจ ูุฎุฑูุฌูู</span>
                            <span class="text-indigo-600">ุงูุฌูุนุฉ 5:00 - 7:00 ูุณุงุกู</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg p-6 card-shadow hover-lift text-center">
                    <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">๐</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ุชุนููู ุชูุงุนูู</h3>
                    <p class="text-gray-600">ููุตุฉ ุญุฏูุซุฉ ูุชุนููู ุงูุฃูุญุงู ูุงูุทููุณ ุงูููุณูุฉ</p>
                </div>
                
                <div class="bg-white rounded-lg p-6 card-shadow hover-lift text-center">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">๐</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ูุชุงุจุนุฉ ุงููุชุงุฆุฌ</h3>
                    <p class="text-gray-600">ุฑุตุฏ ุงูุฏุฑุฌุงุช ููุชุงุจุนุฉ ุงูุชูุฏู ุงูุฃูุงุฏููู</p>
                </div>
                
                <div class="bg-white rounded-lg p-6 card-shadow hover-lift text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-2xl">๐ฅ</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ุฅุฏุงุฑุฉ ูุชุทูุฑุฉ</h3>
                    <p class="text-gray-600">ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงูุญุถูุฑ ูุงูุบูุงุจ</p>
                </div>
            </div>
        </section>

        <!-- Curriculum Section -->
        <section id="curriculum" class="section-content hidden">
            <div class="bg-white rounded-lg p-8 card-shadow">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ุงูููุงูุฌ ุงูุฏุฑุงุณูุฉ</h2>
                
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-red-50 border border-red-200 rounded-lg p-6 hover-lift">
                        <h3 class="text-xl font-bold text-red-800 mb-4">ุงูุณูุฉ ุงูุฃููู</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุฃุณุงุณูุงุช ุงูุฃูุญุงู ุงููุจุทูุฉ</span>
                                <button class="text-red-600 hover:text-red-800" onclick="viewPDF('ุฃุณุงุณูุงุช ุงูุฃูุญุงู ุงููุจุทูุฉ')">๐ ุนุฑุถ</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ููุฏูุฉ ูู ุงููุบุฉ ุงููุจุทูุฉ</span>
                                <button class="text-red-600 hover:text-red-800" onclick="viewPDF('ููุฏูุฉ ูู ุงููุบุฉ ุงููุจุทูุฉ')">๐ ุนุฑุถ</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุงูุทููุณ ุงูููุณูุฉ ุงูุฃุณุงุณูุฉ</span>
                                <button class="text-red-600 hover:text-red-800" onclick="viewPDF('ุงูุทููุณ ุงูููุณูุฉ ุงูุฃุณุงุณูุฉ')">๐ ุนุฑุถ</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 hover-lift">
                        <h3 class="text-xl font-bold text-yellow-800 mb-4">ุงูุณูุฉ ุงูุซุงููุฉ</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุฃูุญุงู ุงููุฏุงุณ ุงูุฅููู</span>
                                <button class="text-yellow-600 hover:text-yellow-800" onclick="viewPDF('ุฃูุญุงู ุงููุฏุงุณ ุงูุฅููู')">๐ ุนุฑุถ</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุงููุบุฉ ุงููุจุทูุฉ ุงููุชูุณุทุฉ</span>
                                <button class="text-yellow-600 hover:text-yellow-800" onclick="viewPDF('ุงููุบุฉ ุงููุจุทูุฉ ุงููุชูุณุทุฉ')">๐ ุนุฑุถ</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุทููุณ ุงูุฃุนูุงุฏ ุงููุจุฑู</span>
                                <button class="text-yellow-600 hover:text-yellow-800" onclick="viewPDF('ุทููุณ ุงูุฃุนูุงุฏ ุงููุจุฑู')">๐ ุนุฑุถ</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6 hover-lift">
                        <h3 class="text-xl font-bold text-green-800 mb-4">ุงูุณูุฉ ุงูุซุงูุซุฉ</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุงูุฃูุญุงู ุงููุชูุฏูุฉ</span>
                                <button class="text-green-600 hover:text-green-800" onclick="viewPDF('ุงูุฃูุญุงู ุงููุชูุฏูุฉ')">๐ ุนุฑุถ</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุชุงุฑูุฎ ุงููููุณุฉ ุงููุจุทูุฉ</span>
                                <button class="text-green-600 hover:text-green-800" onclick="viewPDF('ุชุงุฑูุฎ ุงููููุณุฉ ุงููุจุทูุฉ')">๐ ุนุฑุถ</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white rounded border">
                                <span>ุงูุทููุณ ุงูุฎุงุตุฉ ูุงูููุงุณุจุงุช</span>
                                <button class="text-green-600 hover:text-green-800" onclick="viewPDF('ุงูุทููุณ ุงูุฎุงุตุฉ ูุงูููุงุณุจุงุช')">๐ ุนุฑุถ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="section-content hidden">
            <div class="bg-white rounded-lg p-8 card-shadow">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ุงูุญููุงุช ูุงูููุงุณุจุงุช</h2>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-6 hover-lift">
                        <div class="w-full h-48 bg-red-200 rounded-lg mb-4 flex items-center justify-center">
                            <span class="text-4xl">๐</span>
                        </div>
                        <h3 class="text-xl font-bold text-red-800 mb-2">ุญูู ุฎุชุงู ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ ุงูุฃููู</h3>
                        <p class="text-red-600 mb-2">ููููู 2024</p>
                        <p class="text-gray-700">ุงุญุชูุงููุฉ ุชุฎุฑุฌ ุงูุฏูุนุฉ ุงูุฃููู ูู ุฏุงุฑุณู ุงููุฑูุฒ</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-6 hover-lift">
                        <div class="w-full h-48 bg-yellow-200 rounded-lg mb-4 flex items-center justify-center">
                            <span class="text-4xl">๐</span>
                        </div>
                        <h3 class="text-xl font-bold text-yellow-800 mb-2">ุญูู ุฎุชุงู ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ ุงูุซุงููุฉ</h3>
                        <p class="text-yellow-600 mb-2">ููููู 2025</p>
                        <p class="text-gray-700">ุชูุฑูู ุฎุฑูุฌู ุงูุณูุฉ ุงูุซุงููุฉ ูุนุฑุถ ุฅูุฌุงุฒุงุชูู</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 hover-lift">
                        <div class="w-full h-48 bg-blue-200 rounded-lg mb-4 flex items-center justify-center">
                            <span class="text-4xl">๐</span>
                        </div>
                        <h3 class="text-xl font-bold text-blue-800 mb-2">ููุงุก ุงูุฃูุงุฆู</h3>
                        <p class="text-blue-600 mb-2">ููููู 2025</p>
                        <p class="text-gray-700">ุชูุฑูู ุงูุทูุงุจ ุงููุชููููู ูุงูุฃูุงุฆู ูู ุฌููุน ุงููุฑุงุญู</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 hover-lift">
                        <div class="w-full h-48 bg-green-200 rounded-lg mb-4 flex items-center justify-center">
                            <span class="text-4xl">๐</span>
                        </div>
                        <h3 class="text-xl font-bold text-green-800 mb-2">ุงูููู ุงูุฑูุญู ูุฏุงุฑุณู ุงููุฑูุฒ</h3>
                        <p class="text-green-600 mb-2">ููุณูู</p>
                        <p class="text-gray-700">ููู ุฑูุญู ูููุฒ ูุฏุงุฑุณู ูุฑูุฒ ุงูุญุจูุจ ููุฃูุญุงู ูุงูุฏุฑุงุณุงุช ุงููุจุทูุฉ</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6 hover-lift">
                        <div class="w-full h-48 bg-purple-200 rounded-lg mb-4 flex items-center justify-center">
                            <span class="text-4xl">๐ฅ</span>
                        </div>
                        <h3 class="text-xl font-bold text-purple-800 mb-2">ูุฑุดุฉ ุนูู ููุฃูุญุงู</h3>
                        <p class="text-purple-600 mb-2">ุฏูุฑู</p>
                        <p class="text-gray-700">ูุฑุดุฉ ูุชุฎุตุตุฉ ูุชุนููู ุงูุฏู ูุงูุชุฑูุงูุชู ูู ุงูุฃูุญุงู ุงููุจุทูุฉ</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- News Section -->
        <section id="news" class="section-content hidden">
            <div class="bg-white rounded-lg p-8 card-shadow">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">ุฃุฎุจุงุฑ ุงููุฑูุฒ</h2>
                    <button onclick="showRegistrationForm()" class="bg-gradient-to-r from-green-600 to-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                        <span class="flex items-center gap-2">
                            <span class="text-xl">๐</span>
                            ุชุณุฌูู ุฏุงุฑุณ ุฌุฏูุฏ
                        </span>
                    </button>
                </div>
                
                <div class="space-y-6">
                    <!-- Latest News -->
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6 hover-lift">
                        <div class="flex items-start gap-4">
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <span class="text-2xl">๐</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="text-xl font-bold text-gray-800">ุงุณุชูุจุงู ุฏูุนุฉ ุฌุฏูุฏุฉ ูู ุงูุฏุงุฑุณูู</h3>
                                    <span class="text-sm text-gray-500 bg-white px-2 py-1 rounded">ุณุจุชูุจุฑ 2025</span>
                                </div>
                                <p class="text-gray-600 mb-3">ูุณุนุฏ ูุฑูุฒ ุงูุญุจูุจ ููุฃูุญุงู ูุงูุฏุฑุงุณุงุช ุงููุจุทูุฉ ุงุณุชูุจุงู ุฏูุนุฉ ุฌุฏูุฏุฉ ูู ุงูุฏุงุฑุณูู ูู ุณู ุงูุญุถุงูุฉ ุฅูู ุฃูููุงุก ุงูุฃููุฑ. ุงูุชุณุฌูู ููุชูุญ ุงูุขู!</p>
                                <div class="flex gap-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">ุชุณุฌูู</span>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">ุฏูุนุฉ ุฌุฏูุฏุฉ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- News Item 2 -->
                    <div class="bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 rounded-lg p-6 hover-lift">
                        <div class="flex items-start gap-4">
                            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <span class="text-2xl">๐</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="text-xl font-bold text-gray-800">ุงูุชุญุงู ุงูุชุฑู ุงูุฃูู</h3>
                                    <span class="text-sm text-gray-500 bg-white px-2 py-1 rounded">12 ุฏูุณูุจุฑ 2025</span>
                                </div>
                                <p class="text-gray-600 mb-3">ููุนุฏ ุงูุชุญุงู ุงููุตู ุงูุฏุฑุงุณู ุงูุฃูู ููู ุงูุฌูุนุฉ 12 ุฏูุณูุจุฑ 2025. ูุฑุฌู ูู ุฌููุน ุงูุฏุงุฑุณูู ุงูุงุณุชุนุฏุงุฏ ูุงูุญุถูุฑ ูู ุงูููุนุฏ ุงููุญุฏุฏ.</p>
                                <div class="flex gap-2">
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-sm">ุงูุชุญุงู</span>
                                    <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-sm">ููู</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- News Item 3 -->
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6 hover-lift">
                        <div class="flex items-start gap-4">
                            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <span class="text-2xl">๐</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="text-xl font-bold text-gray-800">ุจุฏุงูุฉ ุงูุชุฑู ุงูุซุงูู</h3>
                                    <span class="text-sm text-gray-500 bg-white px-2 py-1 rounded">30 ููุงูุฑ 2026</span>
                                </div>
                                <p class="text-gray-600 mb-3">ุจุฏุงูุฉ ุงููุตู ุงูุฏุฑุงุณู ุงูุซุงูู ููู ุงูุฌูุนุฉ 30 ููุงูุฑ 2026. ูุชููู ูุฌููุน ุงูุฏุงุฑุณูู ูุตูุงู ุฏุฑุงุณูุงู ูุซูุฑุงู ููููุฆุงู ุจุงูุจุฑูุงุช.</p>
                                <div class="flex gap-2">
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">ุชุฑู ุฌุฏูุฏ</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm">ุจุฏุงูุฉ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- News Item 4 -->
                    <div class="bg-gradient-to-r from-yellow-50 to-red-50 border border-yellow-200 rounded-lg p-6 hover-lift">
                        <div class="flex items-start gap-4">
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <span class="text-2xl">๐</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="text-xl font-bold text-gray-800">ุงูุชุญุงู ุงูููุฏ ุชุฑู</h3>
                                    <span class="text-sm text-gray-500 bg-white px-2 py-1 rounded">17 ุฃูุชูุจุฑ 2025</span>
                                </div>
                                <p class="text-gray-600 mb-3">ุงูุชุญุงู ููุชุตู ุงููุตู ุงูุฏุฑุงุณู (ุงูููุฏ ุชุฑู) ููู ุงูุฌูุนุฉ 17 ุฃูุชูุจุฑ 2025. ูุฐุง ุงูุงูุชุญุงู ููู ูุชูููู ูุณุชูู ุงูุฏุงุฑุณูู.</p>
                                <div class="flex gap-2">
                                    <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-sm">ููุฏ ุชุฑู</span>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-sm">ุชูููู</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- News Item 5 -->
                    <div class="bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-6 hover-lift">
                        <div class="flex items-start gap-4">
                            <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <span class="text-2xl">โช</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start mb-2">
                                    <h3 class="text-xl font-bold text-gray-800">ุงููุฏุงุณ ุงูุดูุฑู ูุฏุงุฑุณู ุงููุฑูุฒ</h3>
                                    <span class="text-sm text-gray-500 bg-white px-2 py-1 rounded">25 ุฃูุชูุจุฑ 2025</span>
                                </div>
                                <p class="text-gray-600 mb-3">ุงููุฏุงุณ ุงูุดูุฑู ุงูุฎุงุต ุจุฏุงุฑุณู ูุฑูุฒ ุงูุญุจูุจ ููุฃูุญุงู ูุงูุฏุฑุงุณุงุช ุงููุจุทูุฉ ููู ุงูุณุจุช ุงูููุงูู 25 ุฃูุชูุจุฑ 2025. ุฏุนูุฉ ุนุงูุฉ ูุฌููุน ุงูุฏุงุฑุณูู ูุฃูููุงุก ุงูุฃููุฑ.</p>
                                <div class="flex gap-2">
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm">ูุฏุงุณ</span>
                                    <span class="bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-sm">ุฑูุญู</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </section>

        <!-- Student Profile Section -->
        <section id="studentProfile" class="section-content hidden">
            <div class="bg-white rounded-lg p-8 card-shadow">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">ุงูููู ุงูุดุฎุตู ููุฏุงุฑุณ</h2>
                    <button onclick="showSection('results')" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                        ุงูุนูุฏุฉ ูููุชุงุฆุฌ
                    </button>
                </div>
                
                <div id="profileContent">
                    <!-- Profile content will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Reports Section -->
        <section id="reports" class="section-content hidden">
            <div class="bg-white rounded-lg p-8 card-shadow">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">๐ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช</h2>
                
                <!-- Summary Cards -->
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 text-center hover-lift">
                        <div class="text-3xl mb-2">๐ฅ</div>
                        <h3 class="text-2xl font-bold text-blue-800" id="totalStudents">0</h3>
                        <p class="text-blue-600">ุฅุฌูุงูู ุงูุฏุงุฑุณูู</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 text-center hover-lift">
                        <div class="text-3xl mb-2">๐</div>
                        <h3 class="text-2xl font-bold text-green-800" id="excellentStudents">0</h3>
                        <p class="text-green-600">ููุชุงุฒ</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-6 text-center hover-lift">
                        <div class="text-3xl mb-2">โญ</div>
                        <h3 class="text-2xl font-bold text-yellow-800" id="veryGoodStudents">0</h3>
                        <p class="text-yellow-600">ุฌูุฏ ุฌุฏุงู</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-6 text-center hover-lift">
                        <div class="text-3xl mb-2">๐</div>
                        <h3 class="text-2xl font-bold text-red-800" id="averageScore">0%</h3>
                        <p class="text-red-600">ูุชูุณุท ุงููุชุงุฆุฌ</p>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <!-- Grade Distribution Chart -->
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ุชูุฒูุน ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ</h3>
                        <div id="gradeChart" class="space-y-3">
                            <!-- Chart will be generated here -->
                        </div>
                    </div>
                    
                    <!-- Subject Performance Chart -->
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ูุชูุณุท ุงูุฏุฑุฌุงุช ุญุณุจ ุงููุงุฏุฉ</h3>
                        <div id="subjectChart" class="space-y-3">
                            <!-- Chart will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Stage Performance -->
                <div class="bg-gray-50 rounded-lg p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ุงูุฃุฏุงุก ุญุณุจ ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ</h3>
                    <div id="stagePerformance" class="grid md:grid-cols-3 gap-4">
                        <!-- Stage performance will be generated here -->
                    </div>
                </div>

                <!-- Top Performers -->
                <div class="bg-gradient-to-r from-yellow-50 to-red-50 rounded-lg p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">๐ ุฃูุถู 10 ุฏุงุฑุณูู</h3>
                    <div id="topPerformers" class="space-y-2">
                        <!-- Top performers will be listed here -->
                    </div>
                </div>

                <!-- Connection Status -->
                <div class="bg-gray-50 rounded-lg p-6 text-center">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">๐ก ุญุงูุฉ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช</h3>
                    <div id="connectionStatus" class="inline-block text-sm px-4 py-2 rounded-full">
                        <span id="statusText">๐ ุฌุงุฑู ุงูุชุญููู...</span>
                    </div>
                    <div class="mt-4 text-xs text-gray-500">
                        ุขุฎุฑ ุชุญุฏูุซ: <span id="lastUpdate">ุฌุงุฑู ุงูุชุญููู...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="login" class="section-content hidden">
            <div class="max-w-md mx-auto bg-white rounded-lg p-8 card-shadow">
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ุชุณุฌูู ุงูุฏุฎูู</h2>
                
                <div class="mb-6">
                    <div class="flex border-b border-gray-200">
                        <button id="studentTab" class="flex-1 py-3 px-4 text-center font-semibold text-yellow-600 border-b-2 border-yellow-600" onclick="switchTab('student')">
                            ุฏุฎูู ุงูุทุงูุจ
                        </button>
                        <button id="teacherTab" class="flex-1 py-3 px-4 text-center font-semibold text-gray-500" onclick="switchTab('teacher')">
                            ุฏุฎูู ุงูุฎุงุฏู
                        </button>
                    </div>
                </div>
                
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div id="studentLogin">
                        <div class="mb-6">
                            <label for="studentCode" class="block text-sm font-semibold text-gray-700 mb-2">ููุฏ ุงูุทุงูุจ</label>
                            <input type="text" id="studentCode" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="ุฃุฏุฎู ููุฏ ุงูุทุงูุจ ุงูุฎุงุต ุจู">
                        </div>
                    </div>
                    
                    <div id="teacherLogin" class="hidden">
                        <div class="mb-4">
                            <label for="teacherUsername" class="block text-sm font-semibold text-gray-700 mb-2">ููุฏ ุงูุฎุงุฏู</label>
                            <input type="text" id="teacherUsername" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="ุฃุฏุฎู ููุฏ ุงูุฎุงุฏู ุงูุฎุงุต ุจู">
                        </div>
                        <div class="mb-6">
                            <label for="teacherPassword" class="block text-sm font-semibold text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ</label>
                            <input type="password" id="teacherPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full bg-yellow-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-yellow-700 transition-colors">
                        ุชุณุฌูู ุงูุฏุฎูู
                    </button>
                </form>
            </div>
        </section>

        <!-- Student Registration Section -->
        <section id="studentRegistration" class="section-content hidden">
            <div class="max-w-2xl mx-auto bg-white rounded-lg p-8 card-shadow">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">๐ ุชุณุฌูู ุฏุงุฑุณ ุฌุฏูุฏ</h2>
                    <button onclick="showSection('news')" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                        ุงูุนูุฏุฉ ููุฃุฎุจุงุฑ
                    </button>
                </div>
                
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                    <h3 class="font-bold text-blue-800 mb-2">๐ ุชุนูููุงุช ุงูุชุณุฌูู:</h3>
                    <ul class="text-sm text-blue-700 space-y-1">
                        <li>โข ุงููุฃ ุฌููุน ุงูุจูุงูุงุช ุงููุทููุจุฉ ุจุฏูุฉ</li>
                        <li>โข ุณูุชู ูุฑุงุฌุนุฉ ุทูุจู ูู ูุจู ุงูุฎุฏุงู</li>
                        <li>โข ุณุชุญุตู ุนูู ููุฏ ุงูุฏุงุฑุณ ุจุนุฏ ุงูููุงููุฉ</li>
                        <li>โข ุณูุชู ุงูุชูุงุตู ูุนู ุนุจุฑ ุงููุงุชู ูุชุฃููุฏ ุงูุชุณุฌูู</li>
                    </ul>
                </div>
                
                <form id="registrationForm" onsubmit="handleStudentRegistration(event)">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label for="studentName" class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงุณู ุงููุงูู *</label>
                            <input type="text" id="studentName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="ุฃุฏุฎู ุงูุงุณู ุงููุงูู" required>
                        </div>
                        
                        <div>
                            <label for="gender" class="block text-sm font-semibold text-gray-700 mb-2">ุงูููุน *</label>
                            <select id="gender" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                                <option value="">ุงุฎุชุฑ ุงูููุน</option>
                                <option value="ุฐูุฑ">ุฐูุฑ</option>
                                <option value="ุฃูุซู">ุฃูุซู</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="studentPhone" class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชู *</label>
                            <input type="tel" id="studentPhone" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="01xxxxxxxxx" required pattern="[0-9]{11}">
                        </div>
                        
                        <div>
                            <label for="parentPhone" class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ูุงุชู ููู ุงูุฃูุฑ</label>
                            <input type="tel" id="parentPhone" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="01xxxxxxxxx" pattern="[0-9]{11}">
                        </div>
                        
                        <div>
                            <label for="birthDate" class="block text-sm font-semibold text-gray-700 mb-2">ุชุงุฑูุฎ ุงููููุงุฏ *</label>
                            <input type="date" id="birthDate" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label for="desiredStage" class="block text-sm font-semibold text-gray-700 mb-2">ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ *</label>
                            <select id="desiredStage" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                                <option value="">ุงุฎุชุฑ ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ</option>
                                <option value="KG1">KG1</option>
                                <option value="KG2">KG2</option>
                                <option value="ุงูุตู ุงูุฃูู ุงูุฃุจุชุฏุงุฆู">ุงูุตู ุงูุฃูู ุงูุฃุจุชุฏุงุฆู</option>
                                <option value="ุงูุตู ุงูุซุงูู ุงูุฃุจุชุฏุงุฆู">ุงูุตู ุงูุซุงูู ุงูุฃุจุชุฏุงุฆู</option>
                                <option value="ุงูุตู ุงูุซุงูุซ ุงูุฃุจุชุฏุงุฆู">ุงูุตู ุงูุซุงูุซ ุงูุฃุจุชุฏุงุฆู</option>
                                <option value="ุงูุตู ุงูุฑุงุจุน ุงูุฃุจุชุฏุงุฆู">ุงูุตู ุงูุฑุงุจุน ุงูุฃุจุชุฏุงุฆู</option>
                                <option value="ุงูุตู ุงูุฎุงูุณ ุงูุฃุจุชุฏุงุฆู">ุงูุตู ุงูุฎุงูุณ ุงูุฃุจุชุฏุงุฆู</option>
                                <option value="ุงูุตู ุงูุณุงุฏุณ ุงูุฃุจุชุฏุงุฆู">ุงูุตู ุงูุณุงุฏุณ ุงูุฃุจุชุฏุงุฆู</option>
                                <option value="ุงูุตู ุงูุฃูู ุงูุฃุนุฏุงุฏู">ุงูุตู ุงูุฃูู ุงูุฃุนุฏุงุฏู</option>
                                <option value="ุงูุตู ุงูุซุงูู ุงูุฃุนุฏุงุฏู">ุงูุตู ุงูุซุงูู ุงูุฃุนุฏุงุฏู</option>
                                <option value="ุงูุตู ุงูุซุงูุซ ุงูุฃุนุฏุงุฏู">ุงูุตู ุงูุซุงูุซ ุงูุฃุนุฏุงุฏู</option>
                                <option value="ุงูุตู ุงูุฃูู ุงูุซุงููู">ุงูุตู ุงูุฃูู ุงูุซุงููู</option>
                                <option value="ุงูุตู ุงูุซุงูู ุงูุซุงููู">ุงูุตู ุงูุซุงูู ุงูุซุงููู</option>
                                <option value="ุงูุตู ุงูุซุงูุซ ุงูุซุงููู">ุงูุตู ุงูุซุงูุซ ุงูุซุงููู</option>
                                <option value="ุดุจุงุจ">ุดุจุงุจ</option>
                                <option value="ุฎุฑูุฌูู">ุฎุฑูุฌูู</option>
                                <option value="ุฃูููุงุก ุฃููุฑ">ุฃูููุงุก ุฃููุฑ</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="deaconDegree" class="block text-sm font-semibold text-gray-700 mb-2">ุฏุฑุฌุฉ ุงูุฑุณุงูุฉ (ููุดูุงูุณุฉ ููุท)</label>
                            <select id="deaconDegree" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                <option value="">ุงุฎุชุฑ ุฏุฑุฌุฉ ุงูุฑุณุงูุฉ</option>
                                <option value="ุบูุฑ ูุฑุณูู">ุบูุฑ ูุฑุณูู</option>
                                <option value="ุฃุจุตุงูุทุณ">ุฃุจุตุงูุทุณ</option>
                                <option value="ุงุบูุณุทุณ">ุงุบูุณุทุณ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <label for="studentAddress" class="block text-sm font-semibold text-gray-700 mb-2">ุงูุนููุงู *</label>
                        <textarea id="studentAddress" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" rows="3" placeholder="ุฃุฏุฎู ุงูุนููุงู ุงูุชูุตููู" required></textarea>
                    </div>
                    
                    <div class="mt-6">
                        <label for="registrationNotes" class="block text-sm font-semibold text-gray-700 mb-2">ููุงุญุธุงุช ุฅุถุงููุฉ</label>
                        <textarea id="registrationNotes" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" rows="3" placeholder="ุฃู ููุงุญุธุงุช ุฃู ุงุณุชูุณุงุฑุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)"></textarea>
                    </div>
                    
                    <div class="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div class="flex items-start gap-3">
                            <input type="checkbox" id="agreeTerms" class="mt-1" required>
                            <label for="agreeTerms" class="text-sm text-gray-700">
                                ุฃูุงูู ุนูู <strong>ุดุฑูุท ูุฃุญูุงู</strong> ูุฑูุฒ ุงูุญุจูุจ ููุฃูุญุงู ูุงูุฏุฑุงุณุงุช ุงููุจุทูุฉุ ูุฃุชุนูุฏ ุจุงูุงูุชุฒุงู ุจุงูุญุถูุฑ ูุงููุดุงุฑูุฉ ุงููุนุงูุฉ ูู ุงูุฃูุดุทุฉ ุงูุชุนููููุฉ.
                            </label>
                        </div>
                    </div>
                    
                    <div class="mt-8 flex gap-4">
                        <button type="submit" class="flex-1 bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-green-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl">
                            ๐ค ุฅุฑุณุงู ุทูุจ ุงูุชุณุฌูู
                        </button>
                        <button type="button" onclick="document.getElementById('registrationForm').reset()" class="bg-gray-500 text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-600 transition-colors">
                            ๐ ุฅุนุงุฏุฉ ุชุนููู
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Teacher Dashboard (Hidden by default) -->
        <section id="teacherDashboard" class="section-content hidden">
            <div class="bg-white rounded-lg p-8 card-shadow">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">ููุญุฉ ุชุญูู ุงูุฎุงุฏู</h2>
                    <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
                        ุชุณุฌูู ุงูุฎุฑูุฌ
                    </button>
                </div>
                
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <button onclick="showTeacherSection('attendance')" class="bg-blue-50 border-2 border-blue-200 rounded-lg p-6 hover:bg-blue-100 transition-colors">
                        <div class="text-4xl mb-3">๐</div>
                        <h3 class="text-xl font-bold text-blue-800">ุชุณุฌูู ุงูุญุถูุฑ</h3>
                    </button>
                    
                    <button onclick="showTeacherSection('grades')" class="bg-green-50 border-2 border-green-200 rounded-lg p-6 hover:bg-green-100 transition-colors">
                        <div class="text-4xl mb-3">๐</div>
                        <h3 class="text-xl font-bold text-green-800">ุฅุฏุงุฑุฉ ุงูุฏุฑุฌุงุช</h3>
                    </button>
                    
                    <button onclick="showTeacherSection('students')" class="bg-purple-50 border-2 border-purple-200 rounded-lg p-6 hover:bg-purple-100 transition-colors">
                        <div class="text-4xl mb-3">๐ฅ</div>
                        <h3 class="text-xl font-bold text-purple-800">ุฅุฏุงุฑุฉ ุงูุทูุงุจ</h3>
                    </button>
                    
                    <button onclick="showTeacherSection('password')" class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-6 hover:bg-yellow-100 transition-colors">
                        <div class="text-4xl mb-3">๐</div>
                        <h3 class="text-xl font-bold text-yellow-800">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h3>
                    </button>
                </div>
                
                <div id="teacherContent">
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">๐ฏ</div>
                        <p class="text-gray-500 text-lg">ุงุฎุชุฑ ุฃุญุฏ ุงูุฎูุงุฑุงุช ุฃุนูุงู ููุจุฏุก</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="gradient-bg text-white mt-16">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center">
                <h3 class="text-xl font-bold mb-4">ูุฑูุฒ ุงูุญุจูุจ ููุฃูุญุงู ูุงูุฏุฑุงุณุงุช ุงููุจุทูุฉ</h3>
                <p class="text-yellow-200 mb-4">ูููุณุฉ ุงูุณูุฏุฉ ุงูุนุฐุฑุงุก ูุงููุฏูุณ ูุงุฑ ููุญูุง - ุงููุณุงูู - ููุตู</p>
                <p class="text-sm text-yellow-100">ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2024</p>
            </div>
        </div>
    </footer>

    <script>
        // Google Sheets configuration
        const STUDENTS_SHEET_ID = '1d2ddgJc0unpLFKQtMuadyUMaHfVIh3gLRb3_613JGqE';
        const STUDENTS_SHEET_GID = '254150448'; // The specific sheet GID from your URL
        
        // Teachers Google Sheet configuration
        const TEACHERS_SHEET_ID = '1hg0ZNWB6Zq35RALOZN8S_1ysaN2MajcsKkBDtopWwaA';
        const TEACHERS_SHEET_GID = '1627034040'; // Sheet: ุบูุงุจ ุงูุชุฑู ุงูุฃูู
        
        // Cache for data
        let studentsData = [];
        let teachersData = [];
        let studentsDataLoaded = false;
        let teachersDataLoaded = false;
        
        // Google Apps Script Web App URL for updating passwords and registrations
        const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxYourScriptIdHere/exec';
        
        // Registration Google Sheet configuration
        const REGISTRATION_SHEET_ID = '1d2ddgJc0unpLFKQtMuadyUMaHfVIh3gLRb3_613JGqE'; // Same as students sheet for now
        const REGISTRATION_SHEET_NAME = 'ุทูุจุงุช ุงูุชุณุฌูู'; // New sheet for registration requests
        
        // Function to update password in Google Sheets
        async function updatePasswordInSheet(teacherCode, newPassword) {
            try {
                const teacher = findTeacherByCode(teacherCode);
                if (!teacher) {
                    throw new Error('ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุฎุงุฏู');
                }

                console.log(`๐ ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ููุฎุงุฏู ${teacherCode} ูู ุงูุตู ${teacher.rowIndex}`);

                // Method 1: Try to update via Google Apps Script (if available)
                try {
                    const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'updatePassword',
                            sheetId: TEACHERS_SHEET_ID,
                            sheetName: 'ุบูุงุจ ุงูุชุฑู ุงูุฃูู',
                            row: teacher.rowIndex,
                            column: 6, // Column F
                            password: newPassword,
                            teacherCode: teacherCode
                        })
                    });

                    if (response.ok) {
                        const result = await response.json();
                        if (result.success) {
                            console.log('โ ุชู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ูู ุฌูุฌู ุดูุช ุจูุฌุงุญ');
                            teacher.password = newPassword;
                            return true;
                        }
                    }
                } catch (scriptError) {
                    console.log('โ๏ธ Google Apps Script ุบูุฑ ูุชุงุญุ ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูุจุฏููุฉ');
                }

                // Method 2: Alternative approach using Google Sheets API (requires API key)
                // This is a fallback method that shows the user how to manually update
                
                // Update local data immediately for user experience
                teacher.password = newPassword;
                
                // Show instructions to user for manual update
                const instructions = `
                    ๐ ุชุนูููุงุช ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ูู ุฌูุฌู ุดูุช:
                    
                    1๏ธโฃ ุงูุชุญ ุงูุฑุงุจุท ุงูุชุงูู:
                    https://docs.google.com/spreadsheets/d/${TEACHERS_SHEET_ID}/edit
                    
                    2๏ธโฃ ุงุจุญุซ ุนู ุงูุตู ุงูุฎุงุต ุจุงูุฎุงุฏู: ${teacher.name} (ููุฏ: ${teacherCode})
                    
                    3๏ธโฃ ูู ุงูุนููุฏ F (ูููุฉ ุงููุฑูุฑ)ุ ุงูุชุจ: ${newPassword}
                    
                    4๏ธโฃ ุงุถุบุท Enter ูุญูุธ ุงูุชุบููุฑ
                    
                    โ ุณูุชู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ุชููุงุฆูุงู ูู ุงููุธุงู
                `;
                
                // Create a detailed modal with instructions
                setTimeout(() => {
                    showPasswordUpdateInstructions(teacherCode, newPassword, teacher.name, instructions);
                }, 1000);
                
                console.log('โ ุชู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ูุญููุงู - ูุชุทูุจ ุชุญุฏูุซ ูุฏูู ูู ุงูุดูุช');
                return true;
                
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ:', error);
                return false;
            }
        }
        
        // Function to show password update instructions
        function showPasswordUpdateInstructions(teacherCode, newPassword, teacherName, instructions) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-2xl mx-auto card-shadow max-h-96 overflow-y-auto">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">๐</div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">ุชู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ูุญููุงู</h3>
                        <p class="text-gray-600">ูุญูุธ ุงูุชุบููุฑ ููุงุฆูุงู ูู ุฌูุฌู ุดูุชุ ูุฑุฌู ุงุชุจุงุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:</p>
                    </div>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-right" dir="rtl">
                        <pre class="text-sm text-gray-700 whitespace-pre-wrap font-mono">${instructions}</pre>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h4 class="font-bold text-blue-800 mb-2">๐ ูุนูููุงุช ุงูุชุญุฏูุซ:</h4>
                        <div class="text-sm text-blue-700 space-y-1">
                            <p><strong>ุงุณู ุงูุฎุงุฏู:</strong> ${teacherName}</p>
                            <p><strong>ููุฏ ุงูุฎุงุฏู:</strong> ${teacherCode}</p>
                            <p><strong>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ:</strong> <span class="bg-yellow-100 px-2 py-1 rounded font-mono">${newPassword}</span></p>
                            <p><strong>ุงูุนููุฏ ุงููุทููุจ:</strong> F (ูููุฉ ุงููุฑูุฑ)</p>
                        </div>
                    </div>
                    
                    <div class="flex gap-3">
                        <button onclick="window.open('https://docs.google.com/spreadsheets/d/${TEACHERS_SHEET_ID}/edit', '_blank')" class="flex-1 bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition-colors">
                            ๐ ูุชุญ ุฌูุฌู ุดูุช
                        </button>
                        <button onclick="copyToClipboard('${newPassword}')" class="flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                            ๐ ูุณุฎ ูููุฉ ุงููุฑูุฑ
                        </button>
                        <button onclick="this.closest('.fixed').remove()" class="flex-1 bg-gray-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-600 transition-colors">
                            ุฅุบูุงู
                        </button>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <p class="text-xs text-gray-500">๐ก ูุตูุญุฉ: ุงุญุชูุธ ุจูุฐู ุงููุงูุฐุฉ ููุชูุญุฉ ุฃุซูุงุก ุชุญุฏูุซ ุงูุดูุช</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // Function to copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showCustomModal('ุชู ุงููุณุฎ!', 'ุชู ูุณุฎ ูููุฉ ุงููุฑูุฑ ุฅูู ุงูุญุงูุธุฉ', 'success');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCustomModal('ุชู ุงููุณุฎ!', 'ุชู ูุณุฎ ูููุฉ ุงููุฑูุฑ ุฅูู ุงูุญุงูุธุฉ', 'success');
            });
        }
        
        // Function to fetch students data from Google Sheets
        async function fetchStudentsData() {
            try {
                // Using the CSV export URL for public Google Sheets
                const csvUrl = `https://docs.google.com/spreadsheets/d/${STUDENTS_SHEET_ID}/export?format=csv&gid=${STUDENTS_SHEET_GID}`;
                
                const response = await fetch(csvUrl);
                const csvText = await response.text();
                
                // Parse CSV data
                const rows = csvText.split('\n').filter(row => row.trim());
                const headers = rows[0].split(',').map(header => header.replace(/"/g, '').trim());
                
                studentsData = [];
                
                for (let i = 1; i < rows.length; i++) {
                    const values = parseCSVRow(rows[i]);
                    
                    if (values.length >= 13 && values[0]) { // Ensure we have all required columns
                        const student = {
                            code: values[0].trim(),
                            name: values[1].trim(),
                            stage: values[2].trim(),
                            phone: values[3].trim(),
                            classroom: values[4].trim(),
                            liturgy: parseFloat(values[5]) || 0,
                            memorization: parseFloat(values[6]) || 0,
                            coptic: parseFloat(values[7]) || 0,
                            hymns: parseFloat(values[8]) || 0,
                            total: parseFloat(values[9]) || 0,
                            percentage: parseFloat(values[10]) || 0,
                            finalResult: values[11].trim(),
                            finalResultText: values[12].trim()
                        };
                        
                        studentsData.push(student);
                    }
                }
                
                studentsDataLoaded = true;
                console.log(`ุชู ุชุญููู ุจูุงูุงุช ${studentsData.length} ุฏุงุฑุณ ูู ุฌูุฌู ุดูุช`);
                return true;
                
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุชุญููู ุจูุงูุงุช ุงูุทูุงุจ ูู ุฌูุฌู ุดูุช:', error);
                
                // Fallback to sample data if Google Sheets fails
                studentsData = [
                    {
                        code: 'ST001',
                        name: 'ูููุง ุฌูุฑุฌ ูููู',
                        stage: 'ุงูุณูุฉ ุงูุฃููู',
                        phone: '01234567890',
                        classroom: 'ุงููุตู ุงูุฃูู',
                        liturgy: 85,
                        memorization: 88,
                        coptic: 78,
                        hymns: 82,
                        total: 333,
                        percentage: 83.25,
                        finalResult: 'ุฌูุฏ ุฌุฏุงู',
                        finalResultText: 'ุฌูุฏ ุฌุฏุงู'
                    },
                    {
                        code: 'ST002',
                        name: 'ูุฑูู ุณููุฑ ุนุจุฏุงููู',
                        stage: 'ุงูุณูุฉ ุงูุฃููู',
                        phone: '01234567891',
                        classroom: 'ุงููุตู ุงูุฃูู',
                        liturgy: 92,
                        memorization: 90,
                        coptic: 88,
                        hymns: 90,
                        total: 360,
                        percentage: 90.0,
                        finalResult: 'ููุชุงุฒ',
                        finalResultText: 'ููุชุงุฒ'
                    }
                ];
                
                studentsDataLoaded = true;
                return false;
            }
        }

        // Function to fetch teachers data from Google Sheets
        async function fetchTeachersData() {
            try {
                console.log('๐ ุจุฏุก ุชุญููู ุจูุงูุงุช ุงูุฎุฏุงู ูู ุฌูุฌู ุดูุช...');
                console.log('๐ ูุนุฑู ุงูุดูุช:', TEACHERS_SHEET_ID);
                
                // Try multiple GIDs to find the correct sheet with teachers data
                const possibleGIDs = [
                    '1627034040',  // ุบูุงุจ ุงูุชุฑู ุงูุฃูู (main sheet)
                    '0',           // Default sheet
                    '254150448',   // Alternative sheet
                    '1',           // Second sheet
                    '2',           // Third sheet
                    null           // No GID (default)
                ];
                
                let csvText = null;
                let successfulUrl = null;
                
                for (const gid of possibleGIDs) {
                    try {
                        const csvUrl = gid ? 
                            `https://docs.google.com/spreadsheets/d/${TEACHERS_SHEET_ID}/export?format=csv&gid=${gid}` :
                            `https://docs.google.com/spreadsheets/d/${TEACHERS_SHEET_ID}/export?format=csv`;
                        
                        console.log(`๐ ูุญุงููุฉ ูุน GID: ${gid || 'default'} - ${csvUrl}`);
                        
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 8000);
                        
                        const response = await fetch(csvUrl, {
                            signal: controller.signal,
                            headers: {
                                'Accept': 'text/csv,text/plain,*/*',
                                'Cache-Control': 'no-cache'
                            }
                        });
                        
                        clearTimeout(timeoutId);
                        console.log(`๐ก ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ ูู GID ${gid}:`, response.status, response.statusText);
                        
                        if (response.ok) {
                            const text = await response.text();
                            
                            // Check if we got valid CSV data
                            if (!text.includes('<html') && !text.includes('<!DOCTYPE') && text.trim()) {
                                // Check if this looks like teachers data by examining the content
                                const lines = text.split('\n').filter(line => line.trim());
                                if (lines.length > 1) {
                                    // Look for teacher-like data patterns
                                    const sampleData = lines.slice(0, 5).join('\n').toLowerCase();
                                    
                                    // If it contains teacher codes or names, use this sheet
                                    if (sampleData.includes('fz64sz56') || 
                                        sampleData.includes('ุฎุงุฏู') || 
                                        sampleData.includes('ุฅุฏุงุฑู') ||
                                        sampleData.includes('ูุดุฑู') ||
                                        lines[0].includes('ููุฏ') ||
                                        lines[0].includes('ุงุณู')) {
                                        csvText = text;
                                        successfulUrl = csvUrl;
                                        console.log(`โ ุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงูุฎุฏุงู ูู GID: ${gid}`);
                                        break;
                                    }
                                }
                            }
                        }
                    } catch (error) {
                        console.log(`โ ูุดู GID ${gid}:`, error.message);
                        continue;
                    }
                }
                
                if (!csvText) {
                    throw new Error('ูู ูุชู ุงูุนุซูุฑ ุนูู ุดูุช ูุญุชูู ุนูู ุจูุงูุงุช ุงูุฎุฏุงู');
                }
                
                console.log('๐ ุชู ุชุญููู ุงููุต ุงูุฎุงู ูู:', successfulUrl);
                console.log('๐ ุทูู ุงููุต:', csvText.length);
                console.log('๐ ุฃูู 300 ุญุฑู:', csvText.substring(0, 300));
                
                // Parse CSV data
                const rows = csvText.split('\n').filter(row => row.trim());
                console.log('๐ ุนุฏุฏ ุงูุตููู:', rows.length);
                
                if (rows.length === 0) {
                    throw new Error('ูุง ุชูุฌุฏ ุจูุงูุงุช ูู ุงูุดูุช');
                }
                
                if (rows.length === 1) {
                    throw new Error('ููุฌุฏ ุนูุงููู ููุท ุจุฏูู ุจูุงูุงุช');
                }
                
                const headers = rows[0].split(',').map(header => header.replace(/"/g, '').trim());
                console.log('๐ ุงูุนูุงููู:', headers);
                
                teachersData = [];
                
                // Look for the correct columns
                let nameColumnIndex = -1;
                let codeColumnIndex = -1;
                let passwordColumnIndex = -1;
                
                // Try to identify columns by their headers
                headers.forEach((header, index) => {
                    const headerLower = header.toLowerCase();
                    if (headerLower.includes('ุงุณู') || headerLower.includes('name')) {
                        nameColumnIndex = index;
                    }
                    if (headerLower.includes('ููุฏ') || headerLower.includes('code') || index === 0) {
                        codeColumnIndex = index;
                    }
                    if (headerLower.includes('ูููุฉ ุงููุฑูุฑ') || headerLower.includes('password') || headerLower.includes('ูููู ุงููุฑูุฑ')) {
                        passwordColumnIndex = index;
                    }
                });
                
                // If we can't find proper headers, assume first column is code, second is name, sixth is password
                if (codeColumnIndex === -1) codeColumnIndex = 0;
                if (nameColumnIndex === -1) nameColumnIndex = 1;
                if (passwordColumnIndex === -1) passwordColumnIndex = 5; // Column F (0-indexed)
                
                console.log(`๐ ุนููุฏ ุงูููุฏ: ${codeColumnIndex}, ุนููุฏ ุงูุงุณู: ${nameColumnIndex}, ุนููุฏ ูููุฉ ุงููุฑูุฑ: ${passwordColumnIndex}`);
                
                for (let i = 1; i < rows.length; i++) {
                    const values = parseCSVRow(rows[i]);
                    console.log(`๐ ุงูุตู ${i}:`, values);
                    
                    if (values.length > Math.max(codeColumnIndex, nameColumnIndex) && 
                        values[codeColumnIndex] && values[codeColumnIndex].trim()) {
                        
                        // Determine permission level based on available columns
                        let permissionLevel = 'ุฎุงุฏู'; // Default level
                        
                        // Check different possible positions for admin column
                        // Look for permission indicators in any column
                        for (let j = 0; j < values.length; j++) {
                            if (values[j]) {
                                const cellValue = values[j].trim().toLowerCase();
                                if (cellValue === 'ูุนู' || cellValue === 'yes' || cellValue === '1' || 
                                    cellValue === 'ุฅุฏุงุฑู' || cellValue === 'ุงุฏุงุฑู' || cellValue === 'admin' ||
                                    cellValue.includes('ุฅุฏุงุฑู') || cellValue.includes('admin')) {
                                    permissionLevel = 'ุฅุฏุงุฑู';
                                    break;
                                } else if (cellValue === 'ูุดุฑู' || cellValue === 'supervisor' || 
                                          cellValue.includes('ูุดุฑู') || cellValue.includes('supervisor')) {
                                    permissionLevel = 'ูุดุฑู';
                                    break;
                                }
                            }
                        }
                        
                        // Get password from column F or use default
                        const storedPassword = values[passwordColumnIndex] && values[passwordColumnIndex].trim() ? 
                                             values[passwordColumnIndex].trim() : '123456';
                        
                        const teacher = {
                            id: i.toString(),
                            rowIndex: i + 1, // Row number in Google Sheets (1-indexed)
                            code: values[codeColumnIndex].trim().toUpperCase(),
                            name: values[nameColumnIndex] ? values[nameColumnIndex].trim() : 'ุบูุฑ ูุญุฏุฏ',
                            phone: values[2] && values[2] !== values[nameColumnIndex] ? values[2].trim() : '',
                            specialization: values[3] && values[3] !== values[nameColumnIndex] ? values[3].trim() : '',
                            password: storedPassword,
                            permissionLevel: permissionLevel,
                            isAdmin: permissionLevel === 'ุฅุฏุงุฑู',
                            isSupervisor: permissionLevel === 'ูุดุฑู' || permissionLevel === 'ุฅุฏุงุฑู'
                        };
                        
                        console.log(`๐ค ุชู ุฅุถุงูุฉ ุฎุงุฏู:`, teacher);
                        teachersData.push(teacher);
                    } else {
                        console.log(`โ๏ธ ุชู ุชุฌุงูู ุงูุตู ${i} - ุจูุงูุงุช ูุงูุตุฉ:`, values);
                    }
                }
                
                teachersDataLoaded = true;
                console.log(`โ ุชู ุชุญููู ุจูุงูุงุช ${teachersData.length} ุฎุงุฏู ูู ุฌูุฌู ุดูุช ุจูุฌุงุญ`);
                console.log('๐ฅ ูุงุฆูุฉ ุงูุฎุฏุงู ุงููุญููุฉ:', teachersData.map(t => `${t.code} - ${t.name}`));
                return true;
                
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุชุญููู ุจูุงูุงุช ุงูุฎุฏุงู ูู ุฌูุฌู ุดูุช:', error);
                console.error('๐ ุชูุงุตูู ุงูุฎุทุฃ:', error.message);
                
                // Fallback to sample data if Google Sheets fails
                console.log('๐ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ...');
                teachersData = [
                    {
                        id: '1',
                        rowIndex: 2,
                        code: 'FZ64SZ56',
                        name: 'ุฃุจููุง ููุณู',
                        phone: '01234567890',
                        specialization: 'ุงูุทููุณ ุงูููุณูุฉ',
                        password: '123456',
                        permissionLevel: 'ุฅุฏุงุฑู',
                        isAdmin: true,
                        isSupervisor: true
                    },
                    {
                        id: '2',
                        rowIndex: 3,
                        code: 'T002',
                        name: 'ุงูุดูุงุณ ูููุง',
                        phone: '01234567891',
                        specialization: 'ุงูุฃูุญุงู ุงููุจุทูุฉ',
                        password: '123456',
                        permissionLevel: 'ุฎุงุฏู',
                        isAdmin: false,
                        isSupervisor: false
                    },
                    {
                        id: '3',
                        rowIndex: 4,
                        code: 'ADMIN',
                        name: 'ุงููุฏูุฑ ุงูุนุงู',
                        phone: '01234567892',
                        specialization: 'ุงูุฅุฏุงุฑุฉ ุงูุนุงูุฉ',
                        password: '123456',
                        permissionLevel: 'ุฅุฏุงุฑู',
                        isAdmin: true,
                        isSupervisor: true
                    }
                ];
                
                teachersDataLoaded = true;
                console.log('โ ุชู ุชุญููู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:', teachersData.map(t => `${t.code} - ${t.name}`));
                return false;
            }
        }
        
        // Helper function to parse CSV row properly handling commas in quoted fields
        function parseCSVRow(row) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < row.length; i++) {
                const char = row[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current); // Add the last field
            return result;
        }

        let currentUser = null;
        let currentTab = 'student';

        // Navigation functions
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Generate reports when reports section is shown
            if (sectionId === 'reports' && studentsDataLoaded) {
                generateReports();
            }
        }

        // Login functions
        function switchTab(tab) {
            currentTab = tab;
            
            // Update tab appearance
            document.getElementById('studentTab').className = tab === 'student' 
                ? 'flex-1 py-3 px-4 text-center font-semibold text-yellow-600 border-b-2 border-yellow-600'
                : 'flex-1 py-3 px-4 text-center font-semibold text-gray-500';
                
            document.getElementById('teacherTab').className = tab === 'teacher' 
                ? 'flex-1 py-3 px-4 text-center font-semibold text-yellow-600 border-b-2 border-yellow-600'
                : 'flex-1 py-3 px-4 text-center font-semibold text-gray-500';
            
            // Show/hide login forms
            if (tab === 'student') {
                document.getElementById('studentLogin').classList.remove('hidden');
                document.getElementById('teacherLogin').classList.add('hidden');
            } else {
                document.getElementById('studentLogin').classList.add('hidden');
                document.getElementById('teacherLogin').classList.remove('hidden');
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            if (currentTab === 'student') {
                const code = document.getElementById('studentCode').value.trim().toUpperCase();
                if (code) {
                    // Load data from Google Sheets if not already loaded
                    if (!studentsDataLoaded) {
                        showCustomModal('ุฌุงุฑู ุงูุชุญููู...', 'ูุชู ุชุญููู ุจูุงูุงุช ุงูุทูุงุจ ูู ุฌูุฌู ุดูุช', 'info');
                        await fetchStudentsData();
                    }
                    
                    const student = findStudentByCode(code);
                    if (student) {
                        currentUser = { type: 'student', code: code, data: student };
                        showStudentProfile(code);
                        showCustomModal('ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!', `ูุฑุญุจุงู ุจู ${student.name}. ููููู ุงูุขู ูุดุงูุฏุฉ ูุชุงุฆุฌู ูู ุงูููู ุงูุดุฎุตู.`, 'success');
                        document.getElementById('studentCode').value = '';
                    } else {
                        showCustomModal('ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู', 'ููุฏ ุงูุฏุงุฑุณ ุบูุฑ ุตุญูุญ', 'error');
                    }
                } else {
                    showCustomModal('ุฎุทุฃ', 'ูุฑุฌู ุฅุฏุฎุงู ููุฏ ุงูุทุงูุจ', 'error');
                }
            } else {
                const teacherCode = document.getElementById('teacherUsername').value.trim();
                const password = document.getElementById('teacherPassword').value.trim();
                
                console.log(`๐ ูุญุงููุฉ ุชุณุฌูู ุฏุฎูู ุฎุงุฏู - ุงูููุฏ: ${teacherCode}`);
                
                if (teacherCode && password) {
                    // Load teachers data from Google Sheets if not already loaded
                    if (!teachersDataLoaded) {
                        console.log('๐ฅ ุชุญููู ุจูุงูุงุช ุงูุฎุฏุงู...');
                        showCustomModal('ุฌุงุฑู ุงูุชุญููู...', 'ูุชู ุชุญููู ุจูุงูุงุช ุงูุฎุฏุงู ูู ุฌูุฌู ุดูุช', 'info');
                        await fetchTeachersData();
                    }
                    
                    console.log(`๐ ุนุฏุฏ ุงูุฎุฏุงู ุงููุญูููู: ${teachersData.length}`);
                    const teacher = findTeacherByCode(teacherCode);
                    
                    // Check password from Google Sheets or default
                    if (teacher && password === teacher.password) {
                        console.log('โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ');
                        currentUser = { 
                            type: 'teacher', 
                            code: teacherCode, 
                            data: teacher,
                            isAdmin: teacher.isAdmin
                        };
                        showTeacherDashboard(teacher);
                        showCustomModal('ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!', `ูุฑุญุจุงู ุจู ${teacher.name} (${teacher.permissionLevel}) ูู ููุญุฉ ุชุญูู ุงูุฎุงุฏู`, 'success');
                        document.getElementById('teacherUsername').value = '';
                        document.getElementById('teacherPassword').value = '';
                    } else if (!teacher) {
                        console.log('โ ููุฏ ุงูุฎุงุฏู ุบูุฑ ููุฌูุฏ');
                        console.log('๐ ุงูุฃููุงุฏ ุงููุชุงุญุฉ:', teachersData.map(t => t.code).join(', '));
                        showCustomModal('ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู', `ููุฏ ุงูุฎุงุฏู "${teacherCode}" ุบูุฑ ุตุญูุญ. ุงูุฃููุงุฏ ุงููุชุงุญุฉ: ${teachersData.map(t => t.code).join(', ')}`, 'error');
                    } else {
                        console.log('โ ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ');
                        showCustomModal('ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู', 'ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ', 'error');
                    }
                } else {
                    showCustomModal('ุฎุทุฃ', 'ูุฑุฌู ุฅุฏุฎุงู ููุฏ ุงูุฎุงุฏู ููููุฉ ุงููุฑูุฑ', 'error');
                }
            }
        }

        function logout() {
            currentUser = null;
            
            // Hide reports navigation for non-teachers
            const reportsNavButton = document.getElementById('reportsNavButton');
            if (reportsNavButton) {
                reportsNavButton.classList.add('hidden');
            }
            
            showSection('home');
            showCustomModal('ุชู ุชุณุฌูู ุงูุฎุฑูุฌ', 'ุดูุฑุงู ูุงุณุชุฎุฏุงู ุงููุธุงู', 'success');
        }

        function showTeacherDashboard(teacher) {
            showSection('teacherDashboard');
            
            // Show reports navigation for teachers
            const reportsNavButton = document.getElementById('reportsNavButton');
            if (reportsNavButton) {
                reportsNavButton.classList.remove('hidden');
            }
            
            // Update dashboard header with teacher info
            const dashboardHeader = document.querySelector('#teacherDashboard h2');
            const permissionBadge = teacher.permissionLevel === 'ุฅุฏุงุฑู' ? 
                '<span class="inline-block bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">ุฅุฏุงุฑู</span>' :
                teacher.permissionLevel === 'ูุดุฑู' ? 
                '<span class="inline-block bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold">ูุดุฑู</span>' :
                '<span class="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">ุฎุงุฏู</span>';
                
            dashboardHeader.innerHTML = `
                <div class="flex items-center gap-4">
                    <div>
                        <h2 class="text-3xl font-bold text-gray-800">ููุญุฉ ุชุญูู ุงูุฎุงุฏู</h2>
                        <p class="text-lg text-gray-600">ูุฑุญุจุงู ${teacher.name} - ${teacher.specialization}</p>
                        ${permissionBadge}
                    </div>
                </div>
            `;
        }

        // Helper functions to find data
        function findStudentByCode(code) {
            const student = studentsData.find(student => student.code === code);
            console.log(`๐ ุงูุจุญุซ ุนู ุทุงูุจ ุจุงูููุฏ ${code}:`, student ? 'ููุฌูุฏ' : 'ุบูุฑ ููุฌูุฏ');
            return student;
        }
        
        function findTeacherByCode(code) {
            const upperCode = code.toUpperCase(); // Convert search code to uppercase
            console.log(`๐ ุงูุจุญุซ ุนู ุฎุงุฏู ุจุงูููุฏ ${code} (${upperCode})`);
            console.log('๐ ูุงุฆูุฉ ุงูุฎุฏุงู ุงููุชุงุญุฉ:', teachersData.map(t => t.code));
            
            const teacher = teachersData.find(teacher => teacher.code === upperCode);
            console.log(`๐ค ูุชูุฌุฉ ุงูุจุญุซ:`, teacher ? `ููุฌูุฏ - ${teacher.name}` : 'ุบูุฑ ููุฌูุฏ');
            return teacher;
        }
        
        function showStudentProfile(studentCode) {
            const student = findStudentByCode(studentCode);
            if (!student) return;
            
            const profileContent = document.getElementById('profileContent');
            
            profileContent.innerHTML = `
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-gradient-to-br from-yellow-50 to-red-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">ุงูุงุณู ุงููุงูู:</span>
                                <span class="font-semibold">${student.name}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ููุฏ ุงูุฏุงุฑุณ:</span>
                                <span class="font-semibold text-yellow-700">${student.code}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ุงููุฑุญูุฉ ุงูุฏุฑุงุณูุฉ:</span>
                                <span class="font-semibold">${student.stage}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ุงููุตู:</span>
                                <span class="font-semibold">${student.classroom}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">ุฑูู ุงููุงุชู:</span>
                                <span class="font-semibold" dir="ltr">${student.phone}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-br from-yellow-50 to-red-50 border-2 border-yellow-200 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                            ๐ ูุชุงุฆุฌ ุงููุตู ุงูุฏุฑุงุณู ุงูุฃูู
                        </h3>
                        
                        <!-- Overall Result Card -->
                        <div class="bg-white rounded-lg p-4 mb-6 border-2 ${student.finalResult === 'ููุชุงุฒ' ? 'border-green-300 bg-green-50' : student.finalResult === 'ุฌูุฏ ุฌุฏุงู' ? 'border-blue-300 bg-blue-50' : 'border-yellow-300 bg-yellow-50'}">
                            <div class="text-center">
                                <div class="text-4xl mb-2">${student.finalResult === 'ููุชุงุฒ' ? '๐ฅ' : student.finalResult === 'ุฌูุฏ ุฌุฏุงู' ? '๐ฅ' : '๐ฅ'}</div>
                                <h4 class="text-2xl font-bold ${student.finalResult === 'ููุชุงุฒ' ? 'text-green-800' : student.finalResult === 'ุฌูุฏ ุฌุฏุงู' ? 'text-blue-800' : 'text-yellow-800'} mb-2">${student.finalResult}</h4>
                                <p class="text-lg font-semibold text-gray-700">ุงููุณุจุฉ: ${student.percentage}%</p>
                                <p class="text-lg font-semibold text-gray-700">ุงููุฌููุน: ${student.total}/400</p>
                            </div>
                        </div>
                        
                        <!-- Detailed Grades -->
                        <div class="space-y-4">
                            <h4 class="font-bold text-gray-700 mb-3">ุชูุงุตูู ุงูุฏุฑุฌุงุช:</h4>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="bg-white rounded-lg p-4 border border-red-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-red-800">โช ุงูุทููุณ ุงูููุณูุฉ</span>
                                        <span class="text-2xl font-bold text-red-600">${student.liturgy}</span>
                                    </div>
                                    <div class="w-full bg-red-100 rounded-full h-2">
                                        <div class="bg-red-500 h-2 rounded-full" style="width: ${student.liturgy}%"></div>
                                    </div>
                                    <p class="text-sm text-red-600 mt-1">${student.liturgy}/100</p>
                                </div>
                                
                                <div class="bg-white rounded-lg p-4 border border-blue-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-blue-800">๐ ุงููุญููุธุงุช ูุงูุฃุฌุจูุฉ</span>
                                        <span class="text-2xl font-bold text-blue-600">${student.memorization}</span>
                                    </div>
                                    <div class="w-full bg-blue-100 rounded-full h-2">
                                        <div class="bg-blue-500 h-2 rounded-full" style="width: ${student.memorization}%"></div>
                                    </div>
                                    <p class="text-sm text-blue-600 mt-1">${student.memorization}/100</p>
                                </div>
                                
                                <div class="bg-white rounded-lg p-4 border border-green-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-green-800">๐ค ุงููุบุฉ ุงููุจุทูุฉ</span>
                                        <span class="text-2xl font-bold text-green-600">${student.coptic}</span>
                                    </div>
                                    <div class="w-full bg-green-100 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: ${student.coptic}%"></div>
                                    </div>
                                    <p class="text-sm text-green-600 mt-1">${student.coptic}/100</p>
                                </div>
                                
                                <div class="bg-white rounded-lg p-4 border border-purple-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="font-semibold text-purple-800">๐ต ุงูุฃูุญุงู ูุงูุชุณุจุญุฉ</span>
                                        <span class="text-2xl font-bold text-purple-600">${student.hymns}</span>
                                    </div>
                                    <div class="w-full bg-purple-100 rounded-full h-2">
                                        <div class="bg-purple-500 h-2 rounded-full" style="width: ${student.hymns}%"></div>
                                    </div>
                                    <p class="text-sm text-purple-600 mt-1">${student.hymns}/100</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
                    <h3 class="text-lg font-bold text-blue-800 mb-3">๐ ุชุญููู ุงูุฃุฏุงุก</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2">ููุงุท ุงูููุฉ:</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                ${getStrengths(student).map(strength => `<li>โข ${strength}</li>`).join('')}
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-2">ูุฌุงูุงุช ุงูุชุญุณูู:</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                ${getImprovementAreas(student).map(area => `<li>โข ${area}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            
            showSection('studentProfile');
        }
        
        function getStrengths(student) {
            const subjects = [
                { name: 'ุงูุทููุณ ุงูููุณูุฉ', score: student.liturgy },
                { name: 'ุงููุญููุธุงุช ูุงูุฃุฌุจูุฉ', score: student.memorization },
                { name: 'ุงููุบุฉ ุงููุจุทูุฉ', score: student.coptic },
                { name: 'ุงูุฃูุญุงู ูุงูุชุณุจุญุฉ', score: student.hymns }
            ];
            
            return subjects
                .filter(subject => subject.score >= 85)
                .map(subject => `${subject.name} (${subject.score}/100)`)
                .slice(0, 2);
        }
        
        function getImprovementAreas(student) {
            const subjects = [
                { name: 'ุงูุทููุณ ุงูููุณูุฉ', score: student.liturgy },
                { name: 'ุงููุญููุธุงุช ูุงูุฃุฌุจูุฉ', score: student.memorization },
                { name: 'ุงููุบุฉ ุงููุจุทูุฉ', score: student.coptic },
                { name: 'ุงูุฃูุญุงู ูุงูุชุณุจุญุฉ', score: student.hymns }
            ];
            
            const improvements = subjects
                .filter(subject => subject.score < 85)
                .map(subject => `${subject.name} (${subject.score}/100)`);
                
            return improvements.length > 0 ? improvements : ['ุงุณุชูุฑ ูู ุงูุฃุฏุงุก ุงูููุชุงุฒ'];
        }
        
        // Reports and Analytics Functions
        function generateReports() {
            if (!studentsDataLoaded) {
                showCustomModal('ุชุญููู ุงูุจูุงูุงุช', 'ุฌุงุฑู ุชุญููู ุจูุงูุงุช ุงูุทูุงุจ...', 'info');
                return;
            }

            // Calculate statistics
            const stats = calculateStatistics();
            
            // Update summary cards
            document.getElementById('totalStudents').textContent = stats.totalStudents;
            document.getElementById('excellentStudents').textContent = stats.excellentCount;
            document.getElementById('veryGoodStudents').textContent = stats.veryGoodCount;
            document.getElementById('averageScore').textContent = stats.averagePercentage + '%';
            
            // Generate charts
            generateGradeChart(stats.gradeDistribution);
            generateSubjectChart(stats.subjectAverages);
            generateStagePerformance(stats.stagePerformance);
            generateTopPerformers(stats.topPerformers);
        }

        function calculateStatistics() {
            const totalStudents = studentsData.length;
            let excellentCount = 0;
            let veryGoodCount = 0;
            let goodCount = 0;
            let totalPercentage = 0;
            
            const subjectTotals = {
                liturgy: 0,
                memorization: 0,
                coptic: 0,
                hymns: 0
            };
            
            const stageStats = {};
            
            studentsData.forEach(student => {
                // Count grade distribution
                if (student.finalResult === 'ููุชุงุฒ') excellentCount++;
                else if (student.finalResult === 'ุฌูุฏ ุฌุฏุงู') veryGoodCount++;
                else goodCount++;
                
                // Sum percentages
                totalPercentage += student.percentage;
                
                // Sum subject scores
                subjectTotals.liturgy += student.liturgy;
                subjectTotals.memorization += student.memorization;
                subjectTotals.coptic += student.coptic;
                subjectTotals.hymns += student.hymns;
                
                // Stage statistics
                if (!stageStats[student.stage]) {
                    stageStats[student.stage] = { count: 0, totalPercentage: 0 };
                }
                stageStats[student.stage].count++;
                stageStats[student.stage].totalPercentage += student.percentage;
            });
            
            return {
                totalStudents,
                excellentCount,
                veryGoodCount,
                goodCount,
                averagePercentage: Math.round(totalPercentage / totalStudents),
                gradeDistribution: {
                    excellent: excellentCount,
                    veryGood: veryGoodCount,
                    good: goodCount
                },
                subjectAverages: {
                    liturgy: Math.round(subjectTotals.liturgy / totalStudents),
                    memorization: Math.round(subjectTotals.memorization / totalStudents),
                    coptic: Math.round(subjectTotals.coptic / totalStudents),
                    hymns: Math.round(subjectTotals.hymns / totalStudents)
                },
                stagePerformance: Object.keys(stageStats).map(stage => ({
                    stage,
                    count: stageStats[stage].count,
                    average: Math.round(stageStats[stage].totalPercentage / stageStats[stage].count)
                })),
                topPerformers: studentsData
                    .sort((a, b) => b.percentage - a.percentage)
                    .slice(0, 10)
            };
        }

        function generateGradeChart(distribution) {
            const total = distribution.excellent + distribution.veryGood + distribution.good;
            const chartElement = document.getElementById('gradeChart');
            
            chartElement.innerHTML = `
                <div class="space-y-3">
                    <div class="flex items-center justify-between">
                        <span class="text-green-700 font-semibold">ููุชุงุฒ</span>
                        <span class="text-green-600">${distribution.excellent} (${Math.round(distribution.excellent/total*100)}%)</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-green-500 h-3 rounded-full" style="width: ${distribution.excellent/total*100}%"></div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span class="text-blue-700 font-semibold">ุฌูุฏ ุฌุฏุงู</span>
                        <span class="text-blue-600">${distribution.veryGood} (${Math.round(distribution.veryGood/total*100)}%)</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-blue-500 h-3 rounded-full" style="width: ${distribution.veryGood/total*100}%"></div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span class="text-yellow-700 font-semibold">ุฌูุฏ</span>
                        <span class="text-yellow-600">${distribution.good} (${Math.round(distribution.good/total*100)}%)</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-yellow-500 h-3 rounded-full" style="width: ${distribution.good/total*100}%"></div>
                    </div>
                </div>
            `;
        }

        function generateSubjectChart(averages) {
            const chartElement = document.getElementById('subjectChart');
            
            chartElement.innerHTML = `
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span class="text-red-700 font-semibold">โช ุงูุทููุณ ุงูููุณูุฉ</span>
                        <span class="text-red-600 font-bold">${averages.liturgy}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-red-500 h-3 rounded-full" style="width: ${averages.liturgy}%"></div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span class="text-blue-700 font-semibold">๐ ุงููุญููุธุงุช ูุงูุฃุฌุจูุฉ</span>
                        <span class="text-blue-600 font-bold">${averages.memorization}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-blue-500 h-3 rounded-full" style="width: ${averages.memorization}%"></div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span class="text-green-700 font-semibold">๐ค ุงููุบุฉ ุงููุจุทูุฉ</span>
                        <span class="text-green-600 font-bold">${averages.coptic}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-green-500 h-3 rounded-full" style="width: ${averages.coptic}%"></div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <span class="text-purple-700 font-semibold">๐ต ุงูุฃูุญุงู ูุงูุชุณุจุญุฉ</span>
                        <span class="text-purple-600 font-bold">${averages.hymns}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-purple-500 h-3 rounded-full" style="width: ${averages.hymns}%"></div>
                    </div>
                </div>
            `;
        }

        function generateStagePerformance(stageData) {
            const stageElement = document.getElementById('stagePerformance');
            
            stageElement.innerHTML = stageData.map(stage => `
                <div class="bg-white rounded-lg p-4 border border-gray-200">
                    <h4 class="font-bold text-gray-800 mb-2">${stage.stage}</h4>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-600 mb-1">${stage.average}%</div>
                        <div class="text-sm text-gray-600">${stage.count} ุฏุงุฑุณ</div>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-3">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: ${stage.average}%"></div>
                    </div>
                </div>
            `).join('');
        }

        function generateTopPerformers(topStudents) {
            const topElement = document.getElementById('topPerformers');
            
            topElement.innerHTML = topStudents.map((student, index) => `
                <div class="flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${
                            index === 0 ? 'bg-yellow-500' : 
                            index === 1 ? 'bg-gray-400' : 
                            index === 2 ? 'bg-yellow-600' : 'bg-blue-500'
                        }">
                            ${index + 1}
                        </div>
                        <div>
                            <div class="font-semibold text-gray-800">${student.name}</div>
                            <div class="text-sm text-gray-600">${student.stage}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-lg ${
                            student.finalResult === 'ููุชุงุฒ' ? 'text-green-600' : 
                            student.finalResult === 'ุฌูุฏ ุฌุฏุงู' ? 'text-blue-600' : 'text-yellow-600'
                        }">${student.percentage}%</div>
                        <div class="text-sm text-gray-600">${student.finalResult}</div>
                    </div>
                </div>
            `).join('');
        }

        // Function to show registration form
        function showRegistrationForm() {
            showSection('studentRegistration');
        }
        
        // Function to handle student registration
        async function handleStudentRegistration(event) {
            event.preventDefault();
            
            // Get form data
            const formData = {
                name: document.getElementById('studentName').value.trim(),
                gender: document.getElementById('gender').value,
                phone: document.getElementById('studentPhone').value.trim(),
                parentPhone: document.getElementById('parentPhone').value.trim(),
                birthDate: document.getElementById('birthDate').value,
                desiredStage: document.getElementById('desiredStage').value,
                deaconDegree: document.getElementById('deaconDegree').value,
                address: document.getElementById('studentAddress').value.trim(),
                notes: document.getElementById('registrationNotes').value.trim(),
                registrationDate: new Date().toLocaleDateString('ar-EG'),
                registrationTime: new Date().toLocaleTimeString('ar-EG'),
                status: 'ููุฏ ุงููุฑุงุฌุนุฉ'
            };
            
            // Validate required fields
            if (!formData.name || !formData.gender || !formData.phone || !formData.birthDate || !formData.desiredStage || !formData.address) {
                showCustomModal('ุฎุทุฃ ูู ุงูุจูุงูุงุช', 'ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ ุงููููุฒุฉ ุจุนูุงูุฉ *', 'error');
                return;
            }
            
            // Validate phone number
            if (!/^[0-9]{11}$/.test(formData.phone)) {
                showCustomModal('ุฎุทุฃ ูู ุฑูู ุงููุงุชู', 'ูุฑุฌู ุฅุฏุฎุงู ุฑูู ูุงุชู ุตุญูุญ ูููู ูู 11 ุฑูู', 'error');
                return;
            }
            
            // Validate parent phone if provided
            if (formData.parentPhone && !/^[0-9]{11}$/.test(formData.parentPhone)) {
                showCustomModal('ุฎุทุฃ ูู ุฑูู ูุงุชู ููู ุงูุฃูุฑ', 'ูุฑุฌู ุฅุฏุฎุงู ุฑูู ูุงุชู ุตุญูุญ ูููู ูู 11 ุฑูู ุฃู ุชุฑูู ูุงุฑุบุงู', 'error');
                return;
            }
            
            try {
                // Show loading message
                showCustomModal('ุฌุงุฑู ุงูุฅุฑุณุงู...', 'ูุชู ุฅุฑุณุงู ุทูุจ ุงูุชุณุฌูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช', 'info');
                
                // Try to submit to Google Sheets
                const success = await submitRegistrationToSheet(formData);
                
                if (success) {
                    // Clear form
                    document.getElementById('registrationForm').reset();
                    
                    // Show success message
                    showCustomModal(
                        'ุชู ุฅุฑุณุงู ุทูุจ ุงูุชุณุฌูู ุจูุฌุงุญ! ๐', 
                        `ุดูุฑุงู ูู ${formData.name}! ุชู ุงุณุชูุงู ุทูุจ ุงูุชุณุฌูู ูุณูุชู ูุฑุงุฌุนุชู ูู ูุจู ุงูุฎุฏุงู. ุณูุชูุงุตู ูุนู ุฎูุงู 24-48 ุณุงุนุฉ ุนูู ุฑูู ${formData.phone} ูุชุฃููุฏ ุงูุชุณุฌูู ูุฅุนุทุงุฆู ููุฏ ุงูุฏุงุฑุณ.`, 
                        'success'
                    );
                    
                    // Return to news section after 3 seconds
                    setTimeout(() => {
                        showSection('news');
                    }, 3000);
                    
                } else {
                    // Show fallback instructions
                    showRegistrationFallbackInstructions(formData);
                }
                
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุฅุฑุณุงู ุทูุจ ุงูุชุณุฌูู:', error);
                showRegistrationFallbackInstructions(formData);
            }
        }
        
        // Function to submit registration to Google Sheets
        async function submitRegistrationToSheet(formData) {
            try {
                // Method 1: Try Google Apps Script
                try {
                    const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'addRegistration',
                            sheetId: REGISTRATION_SHEET_ID,
                            sheetName: REGISTRATION_SHEET_NAME,
                            data: formData
                        })
                    });

                    if (response.ok) {
                        const result = await response.json();
                        if (result.success) {
                            console.log('โ ุชู ุฅุฑุณุงู ุทูุจ ุงูุชุณุฌูู ุฅูู ุฌูุฌู ุดูุช ุจูุฌุงุญ');
                            return true;
                        }
                    }
                } catch (scriptError) {
                    console.log('โ๏ธ Google Apps Script ุบูุฑ ูุชุงุญ ููุชุณุฌูู');
                }
                
                // Method 2: Store locally and show instructions
                const registrationId = 'REG_' + Date.now();
                localStorage.setItem(registrationId, JSON.stringify(formData));
                console.log('๐พ ุชู ุญูุธ ุทูุจ ุงูุชุณุฌูู ูุญููุงู:', registrationId);
                
                return false; // Will trigger fallback instructions
                
            } catch (error) {
                console.error('โ ุฎุทุฃ ูู ุฅุฑุณุงู ุทูุจ ุงูุชุณุฌูู:', error);
                return false;
            }
        }
        
        // Function to show registration fallback instructions
        function showRegistrationFallbackInstructions(formData) {
            const instructions = `
๐ ุจูุงูุงุช ุทูุจ ุงูุชุณุฌูู:

๐ค ุงูุงุณู: ${formData.name}
๐ฅ ุงูููุน: ${formData.gender}
๐ฑ ุงููุงุชู: ${formData.phone}
${formData.parentPhone ? `๐ ูุงุชู ููู ุงูุฃูุฑ: ${formData.parentPhone}` : ''}
๐ ุชุงุฑูุฎ ุงููููุงุฏ: ${formData.birthDate}
๐ ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ: ${formData.desiredStage}
${formData.deaconDegree ? `โช ุฏุฑุฌุฉ ุงูุฑุณุงูุฉ: ${formData.deaconDegree}` : ''}
๐ ุงูุนููุงู: ${formData.address}
${formData.notes ? `๐ ููุงุญุธุงุช: ${formData.notes}` : ''}
๐ ุชุงุฑูุฎ ุงูุชุณุฌูู: ${formData.registrationDate} - ${formData.registrationTime}

๐ ูุฑุฌู ุฅุฑุณุงู ูุฐู ุงูุจูุงูุงุช ุฅูู ุงูุฎุฏุงู ุนุจุฑ:
โข ุงููุงุชู: 01234567890
โข ุฃู ุฅุถุงูุชูุง ูุฏููุงู ูู ุฌูุฌู ุดูุช
            `;
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-2xl mx-auto card-shadow max-h-96 overflow-y-auto">
                    <div class="text-center mb-6">
                        <div class="text-4xl mb-4">๐</div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">ุชู ุญูุธ ุทูุจ ุงูุชุณุฌูู ูุญููุงู</h3>
                        <p class="text-gray-600">ูุฑุฌู ุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุชุงููุฉ ููุฎุฏุงู ูุฅููุงู ุงูุชุณุฌูู:</p>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-right" dir="rtl">
                        <pre class="text-sm text-gray-700 whitespace-pre-wrap font-mono">${instructions}</pre>
                    </div>
                    
                    <div class="flex gap-3">
                        <button onclick="copyToClipboard(\`${instructions.replace(/`/g, '\\`')}\`)" class="flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                            ๐ ูุณุฎ ุงูุจูุงูุงุช
                        </button>
                        <button onclick="this.closest('.fixed').remove(); showSection('news');" class="flex-1 bg-gray-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-600 transition-colors">
                            ุฅุบูุงู
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load both students and teachers data from Google Sheets on page load
            Promise.all([fetchStudentsData(), fetchTeachersData()]).then(([studentsSuccess, teachersSuccess]) => {
                const statusElement = document.getElementById('connectionStatus');
                const statusText = document.getElementById('statusText');
                
                console.log('Students loaded:', studentsDataLoaded, 'Count:', studentsData.length);
                console.log('Teachers loaded:', teachersDataLoaded, 'Count:', teachersData.length);
                
                // Update last update time
                const lastUpdateElement = document.getElementById('lastUpdate');
                if (lastUpdateElement) {
                    lastUpdateElement.textContent = new Date().toLocaleString('ar-EG');
                }
                
                if (studentsSuccess && teachersSuccess) {
                    console.log('ุชู ุชุญููู ุฌููุน ุงูุจูุงูุงุช ุจูุฌุงุญ ูู ุฌูุฌู ุดูุช');
                    statusElement.className = 'text-sm px-4 py-2 rounded-full bg-green-100 text-green-800 border border-green-300';
                    statusText.textContent = `โ ูุชุตู - ${studentsData.length} ุฏุงุฑุณุ ${teachersData.length} ุฎุงุฏู`;
                } else if (studentsSuccess || teachersSuccess) {
                    console.log('ุชู ุชุญููู ุจุนุถ ุงูุจูุงูุงุช ูู ุฌูุฌู ุดูุช');
                    statusElement.className = 'text-sm px-4 py-2 rounded-full bg-yellow-100 text-yellow-800 border border-yellow-300';
                    const studentsStatus = studentsSuccess ? `${studentsData.length} ุฏุงุฑุณ โ` : `${studentsData.length} ุฏุงุฑุณ โ๏ธ`;
                    const teachersStatus = teachersSuccess ? `${teachersData.length} ุฎุงุฏู โ` : `${teachersData.length} ุฎุงุฏู โ๏ธ`;
                    statusText.textContent = `โ๏ธ ูุชุตู ุฌุฒุฆูุงู - ${studentsStatus}ุ ${teachersStatus}`;
                    
                    // Show detailed error information
                    if (!teachersSuccess) {
                        console.log('๐ ุชูุงุตูู ูุดููุฉ ุชุญููู ุจูุงูุงุช ุงูุฎุฏุงู:');
                        console.log('๐ ุงูุฑุงุจุท ุงููุณุชุฎุฏู:', `https://docs.google.com/spreadsheets/d/${TEACHERS_SHEET_ID}/export?format=csv&gid=${TEACHERS_SHEET_GID}`);
                        console.log('๐ ุฑุงุจุท ุงูุดูุช ุงูุฃุตูู:', `https://docs.google.com/spreadsheets/d/${TEACHERS_SHEET_ID}/edit`);
                        console.log('๐ก ุฎุทูุงุช ุงูุญู:');
                        console.log('   1. ุงูุชุญ ุงูุดูุช ูู ุงูุฑุงุจุท ุฃุนูุงู');
                        console.log('   2. ุงุถุบุท ุนูู "Share" ุฃู "ูุดุงุฑูุฉ"');
                        console.log('   3. ุงุฎุชุฑ "Anyone with the link can view"');
                        console.log('   4. ุชุฃูุฏ ูู ูุฌูุฏ ุจูุงูุงุช ุงูุฎุฏุงู ูู ุงูุดูุช');
                        console.log('   5. ุงูุนููุฏ ุงูุฃูู: ููุฏ ุงูุฎุงุฏูุ ุงูุนููุฏ ุงูุซุงูู: ุงุณู ุงูุฎุงุฏู');
                    }
                } else {
                    console.log('ุชู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ');
                    statusElement.className = 'text-sm px-4 py-2 rounded-full bg-red-100 text-red-800 border border-red-300';
                    statusText.textContent = `โ๏ธ ุจูุงูุงุช ุชุฌุฑูุจูุฉ - ${studentsData.length} ุฏุงุฑุณุ ${teachersData.length} ุฎุงุฏู`;
                }
                
                // Generate reports when data is loaded
                if (studentsDataLoaded) {
                    generateReports();
                }
            });
        });

        // Teacher dashboard functions
        function showTeacherSection(section) {
            const content = document.getElementById('teacherContent');
            
            if (section === 'attendance') {
                content.innerHTML = `
                    <div class="bg-blue-50 rounded-lg p-6">
                        <h3 class="text-2xl font-bold text-blue-800 mb-4">ุชุณุฌูู ุงูุญุถูุฑ ูุงูุบูุงุจ</h3>
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุฎุชุฑ ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ:</label>
                            <select class="w-full md:w-1/3 p-3 border border-gray-300 rounded-lg">
                                <option>ุงูุณูุฉ ุงูุฃููู</option>
                                <option>ุงูุณูุฉ ุงูุซุงููุฉ</option>
                                <option>ุงูุณูุฉ ุงูุซุงูุซุฉ</option>
                            </select>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <p class="text-gray-600">ุณูุชู ุนุฑุถ ูุงุฆูุฉ ุงูุทูุงุจ ููุง ูุชุณุฌูู ุงูุญุถูุฑ ูุงูุบูุงุจ</p>
                        </div>
                    </div>
                `;
            } else if (section === 'grades') {
                content.innerHTML = `
                    <div class="bg-green-50 rounded-lg p-6">
                        <h3 class="text-2xl font-bold text-green-800 mb-4">ุฅุฏุงุฑุฉ ุงูุฏุฑุฌุงุช</h3>
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุฎุชุฑ ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ:</label>
                            <select class="w-full md:w-1/3 p-3 border border-gray-300 rounded-lg">
                                <option>ุงูุณูุฉ ุงูุฃููู</option>
                                <option>ุงูุณูุฉ ุงูุซุงููุฉ</option>
                                <option>ุงูุณูุฉ ุงูุซุงูุซุฉ</option>
                            </select>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <p class="text-gray-600">ุณูุชู ุนุฑุถ ูููุฐุฌ ุฅุฏุฎุงู ุงูุฏุฑุฌุงุช ููุง</p>
                        </div>
                    </div>
                `;
            } else if (section === 'students') {
                content.innerHTML = `
                    <div class="bg-purple-50 rounded-lg p-6">
                        <h3 class="text-2xl font-bold text-purple-800 mb-4">ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุทูุงุจ</h3>
                        <div class="flex gap-4 mb-4">
                            <button class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ
                            </button>
                            <button class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                                ุชุตุฏูุฑ ุงูุจูุงูุงุช
                            </button>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <p class="text-gray-600">ุณูุชู ุนุฑุถ ูุงุฆูุฉ ุงูุทูุงุจ ูุฃุฏูุงุช ุงูุฅุฏุงุฑุฉ ููุง</p>
                        </div>
                    </div>
                `;
            } else if (section === 'password') {
                const teacher = currentUser.data;
                content.innerHTML = `
                    <div class="bg-yellow-50 rounded-lg p-6">
                        <h3 class="text-2xl font-bold text-yellow-800 mb-6">๐ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h3>
                        
                        <div class="bg-white rounded-lg p-6 max-w-md mx-auto">
                            <div class="mb-6">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                        <span class="text-2xl">๐ค</span>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-gray-800">${teacher.name}</h4>
                                        <p class="text-sm text-gray-600">ููุฏ ุงูุฎุงุฏู: ${teacher.code}</p>
                                    </div>
                                </div>
                            </div>
                            
                            <form id="changePasswordForm" onsubmit="handlePasswordChange(event)">
                                <div class="mb-4">
                                    <label for="currentPassword" class="block text-sm font-semibold text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ</label>
                                    <input type="password" id="currentPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ" required>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="newPassword" class="block text-sm font-semibold text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                                    <input type="password" id="newPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ" required minlength="6">
                                    <p class="text-xs text-gray-500 mt-1">ูุฌุจ ุฃู ุชููู ูููุฉ ุงููุฑูุฑ 6 ุฃุญุฑู ุนูู ุงูุฃูู</p>
                                </div>
                                
                                <div class="mb-6">
                                    <label for="confirmPassword" class="block text-sm font-semibold text-gray-700 mb-2">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                                    <input type="password" id="confirmPassword" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="ุฃุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ" required>
                                </div>
                                
                                <div class="flex gap-3">
                                    <button type="submit" class="flex-1 bg-yellow-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-yellow-700 transition-colors">
                                        ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ
                                    </button>
                                    <button type="button" onclick="showTeacherSection('home')" class="flex-1 bg-gray-500 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-600 transition-colors">
                                        ุฅูุบุงุก
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h4 class="font-bold text-blue-800 mb-2">๐ก ูุตุงุฆุญ ุงูุฃูุงู:</h4>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>โข ุงุณุชุฎุฏู ูููุฉ ูุฑูุฑ ูููุฉ ุชุญุชูู ุนูู ุฃุฑูุงู ูุญุฑูู</li>
                                <li>โข ูุง ุชุดุงุฑู ูููุฉ ุงููุฑูุฑ ูุน ุฃู ุดุฎุต ุขุฎุฑ</li>
                                <li>โข ูู ุจุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจุงูุชุธุงู</li>
                                <li>โข ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฎุฑูุฌ ุจุนุฏ ุงูุชูุงุก ุงูุนูู</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
        }

        // Handle password change
        async function handlePasswordChange(event) {
            event.preventDefault();
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            const teacher = currentUser.data;
            
            // Validate current password
            if (currentPassword !== teacher.password) {
                showCustomModal('ุฎุทุฃ', 'ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ ุบูุฑ ุตุญูุญุฉ', 'error');
                return;
            }
            
            // Validate new password
            if (newPassword.length < 6) {
                showCustomModal('ุฎุทุฃ', 'ูุฌุจ ุฃู ุชููู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ 6 ุฃุญุฑู ุนูู ุงูุฃูู', 'error');
                return;
            }
            
            // Validate password confirmation
            if (newPassword !== confirmPassword) {
                showCustomModal('ุฎุทุฃ', 'ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ ูุชุฃููุฏูุง ุบูุฑ ูุชุทุงุจููู', 'error');
                return;
            }
            
            // Check if new password is different from current
            if (newPassword === currentPassword) {
                showCustomModal('ุฎุทุฃ', 'ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ ูุฌุจ ุฃู ุชููู ูุฎุชููุฉ ุนู ุงูุญุงููุฉ', 'error');
                return;
            }
            
            try {
                // Show loading message
                showCustomModal('ุฌุงุฑู ุงูุชุญุฏูุซ...', 'ูุชู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ูู ุฌูุฌู ุดูุช', 'info');
                
                // Update password in Google Sheets
                const success = await updatePasswordInSheet(teacher.code, newPassword);
                
                if (success) {
                    // Update current user data
                    currentUser.data.password = newPassword;
                    
                    // Clear form
                    document.getElementById('changePasswordForm').reset();
                    
                    // Show success message
                    showCustomModal('ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ!', 'ุชู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ. ุงุณุชุฎุฏู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ ูู ุงููุฑุฉ ุงููุงุฏูุฉ.', 'success');
                    
                    // Return to dashboard home
                    setTimeout(() => {
                        showTeacherSection('home');
                    }, 2000);
                    
                } else {
                    showCustomModal('ุฎุทุฃ ูู ุงูุชุญุฏูุซ', 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.', 'error');
                }
                
            } catch (error) {
                console.error('ุฎุทุฃ ูู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ:', error);
                showCustomModal('ุฎุทุฃ', 'ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.', 'error');
            }
        }

        // PDF viewer function
        function viewPDF(bookName) {
            showCustomModal('ุนุฑุถ ุงููููุฌ', `ุณูุชู ูุชุญ ูุชุงุจ "${bookName}" ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ`, 'info');
        }

        // Custom modal function
        function showCustomModal(title, message, type) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            const iconColor = type === 'success' ? 'text-green-500' : type === 'error' ? 'text-red-500' : 'text-blue-500';
            const icon = type === 'success' ? 'โ' : type === 'error' ? 'โ' : 'โน๏ธ';
            
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-8 max-w-md mx-4 card-shadow">
                    <div class="text-center">
                        <div class="text-4xl mb-4">${icon}</div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4">${title}</h3>
                        <p class="text-gray-600 mb-6">${message}</p>
                        <button onclick="this.closest('.fixed').remove()" class="bg-yellow-600 text-white px-6 py-2 rounded-lg hover:bg-yellow-700 transition-colors">
                            ููุงูู
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (modal.parentNode) {
                    modal.remove();
                }
            }, 3000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99659cbcf2c4e238',t:'MTc2MTc3MTcyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
